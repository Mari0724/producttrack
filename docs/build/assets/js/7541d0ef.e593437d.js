"use strict";(self.webpackChunkdocs_web=self.webpackChunkdocs_web||[]).push([[599],{3045:(e,r,d)=>{d.r(r),d.d(r,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>n,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"backend/controllers/Productos.controller","title":"Crontrolador de Productos","description":"Controlador encargado de manejar las operaciones relacionadas con los productos. Aqu\xed se implementan rutas RESTful para crear, consultar, actualizar y eliminar productos, as\xed como estad\xedsticas y filtros personalizados.","source":"@site/docs/backend/controllers/Productos.controller.md","sourceDirName":"backend/controllers","slug":"/backend/controllers/Productos.controller","permalink":"/docs/backend/controllers/Productos.controller","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/backend/controllers/Productos.controller.md","tags":[],"version":"current","frontMatter":{"id":"Productos.controller","title":"Crontrolador de Productos","sidebar_label":"Productos"},"sidebar":"tutorialSidebar","previous":{"title":"Cloudinary","permalink":"/docs/backend/config/cloudinary"},"next":{"title":"\ud83d\udce6 Backend","permalink":"/docs/backend/"}}');var s=d(4848),c=d(8453);const n={id:"Productos.controller",title:"Crontrolador de Productos",sidebar_label:"Productos"},i="Productos.controller.ts",a={},l=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\u2705 Funcionalidades principales",id:"-funcionalidades-principales",level:2},{value:"\u2705 Funcionalidades principales",id:"-funcionalidades-principales-1",level:3},{value:"\ud83e\udde9 Permisos",id:"-permisos",level:2},{value:"\ud83e\uddea Validaciones",id:"-validaciones",level:2},{value:"\ud83d\udd0e Filtros disponibles en <code>GET /Productos</code>",id:"-filtros-disponibles-en-get-productos",level:2},{value:"\ud83e\uddee Estad\xedsticas disponibles",id:"-estad\xedsticas-disponibles",level:2},{value:"\ud83d\udee0\ufe0f M\xf3dulos utilizados",id:"\ufe0f-m\xf3dulos-utilizados",level:2},{value:"\ud83d\udcd8 Ejemplos de uso de la API de Productos",id:"-ejemplos-de-uso-de-la-api-de-productos",level:3},{value:"\ud83d\udd39 GET <code>/Productos</code>",id:"-get-productos",level:4},{value:"\ud83d\udd39 GET <code>/Productos/categorias</code>",id:"-get-productoscategorias",level:4},{value:"\ud83d\udd39 GET <code>/Productos/por-categoria?categoria=Tecnolog\xeda</code>",id:"-get-productospor-categoriacategoriatecnolog\xeda",level:4},{value:"\ud83d\udd39 GET <code>/Productos/cantidad-por-categoria</code>",id:"-get-productoscantidad-por-categoria",level:4},{value:"\ud83d\udd39 GET <code>/Productos/cantidad-por-rango-precio</code>",id:"-get-productoscantidad-por-rango-precio",level:4},{value:"\ud83d\udd39 POST <code>/Productos</code>",id:"-post-productos",level:4}];function t(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"productoscontrollerts",children:"Productos.controller.ts"})}),"\n",(0,s.jsx)(r.p,{children:"Controlador encargado de manejar las operaciones relacionadas con los productos. Aqu\xed se implementan rutas RESTful para crear, consultar, actualizar y eliminar productos, as\xed como estad\xedsticas y filtros personalizados."}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.code,{children:"src/controllers/Productos.controller.ts"})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-funcionalidades-principales",children:"\u2705 Funcionalidades principales"}),"\n",(0,s.jsx)(r.h3,{id:"-funcionalidades-principales-1",children:"\u2705 Funcionalidades principales"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"M\xe9todo"}),(0,s.jsx)(r.th,{children:"Ruta"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos"})}),(0,s.jsx)(r.td,{children:"Obtener todos los productos con filtros opcionales"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos/categorias"})}),(0,s.jsx)(r.td,{children:"Obtener todas las categor\xedas \xfanicas de productos"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos/por-categoria"})}),(0,s.jsx)(r.td,{children:"Obtener productos por categor\xeda espec\xedfica"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos/cantidad-por-categoria"})}),(0,s.jsx)(r.td,{children:"Obtener cantidad de productos por categor\xeda"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos/cantidad-por-rango-precio"})}),(0,s.jsx)(r.td,{children:"Obtener cantidad de productos por rangos de precio"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos/{id}"})}),(0,s.jsx)(r.td,{children:"Obtener producto por ID"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"POST"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos"})}),(0,s.jsx)(r.td,{children:"Crear un nuevo producto (requiere autenticaci\xf3n y permisos)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"PUT"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos/{id}"})}),(0,s.jsx)(r.td,{children:"Actualizar un producto existente (requiere autenticaci\xf3n y permisos)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"DELETE"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos/{id}"})}),(0,s.jsx)(r.td,{children:"Eliminar un producto existente (requiere autenticaci\xf3n y permisos)"})]})]})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-permisos",children:"\ud83e\udde9 Permisos"}),"\n",(0,s.jsx)(r.p,{children:"Las acciones de crear, editar y eliminar productos est\xe1n protegidas mediante middleware JWT y validaci\xf3n de roles usando la funci\xf3n puede()."}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-validaciones",children:"\ud83e\uddea Validaciones"}),"\n",(0,s.jsx)(r.p,{children:"Se utiliza zodValidate con el esquema productoSchema para validar los datos enviados en las operaciones de creaci\xf3n y actualizaci\xf3n de productos."}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h2,{id:"-filtros-disponibles-en-get-productos",children:["\ud83d\udd0e Filtros disponibles en ",(0,s.jsx)(r.code,{children:"GET /Productos"})]}),"\n",(0,s.jsxs)(r.p,{children:["Puedes aplicar los siguientes filtros como par\xe1metros de consulta (",(0,s.jsx)(r.code,{children:"query"}),"):"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"nombre"})," (",(0,s.jsx)(r.code,{children:"string"}),"): Filtra productos por nombre."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"categoria"})," (",(0,s.jsx)(r.code,{children:"string"}),"): Filtra productos por categor\xeda."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"estado"})," (",(0,s.jsx)(r.code,{children:"string"}),"): Filtra productos por su estado."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"usuarioId"})," (",(0,s.jsx)(r.code,{children:"number"}),"): Filtra productos asociados a un usuario espec\xedfico."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"fechaAdquisicionDesde"})," (",(0,s.jsx)(r.code,{children:"ISO string"}),"): Fecha de adquisici\xf3n ",(0,s.jsx)(r.strong,{children:"desde"})," la cual buscar."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"fechaAdquisicionHasta"})," (",(0,s.jsx)(r.code,{children:"ISO string"}),"): Fecha de adquisici\xf3n ",(0,s.jsx)(r.strong,{children:"hasta"})," la cual buscar."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"fechaVencimientoDesde"})," (",(0,s.jsx)(r.code,{children:"ISO string"}),"): Fecha de vencimiento ",(0,s.jsx)(r.strong,{children:"desde"})," la cual buscar."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"fechaVencimientoHasta"})," (",(0,s.jsx)(r.code,{children:"ISO string"}),"): Fecha de vencimiento ",(0,s.jsx)(r.strong,{children:"hasta"})," la cual buscar."]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-estad\xedsticas-disponibles",children:"\ud83e\uddee Estad\xedsticas disponibles"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"M\xe9todo"}),(0,s.jsx)(r.th,{children:"Ruta"}),(0,s.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos/categorias"})}),(0,s.jsx)(r.td,{children:"Lista de categor\xedas \xfanicas."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos/por-categoria?categoria=X"})}),(0,s.jsx)(r.td,{children:"Productos filtrados por una categor\xeda espec\xedfica."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos/cantidad-por-categoria"})}),(0,s.jsx)(r.td,{children:"Conteo de productos agrupado por categor\xeda."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GET"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/Productos/cantidad-por-rango-precio"})}),(0,s.jsx)(r.td,{children:"Conteo de productos agrupado por rangos de precios."})]})]})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"\ufe0f-m\xf3dulos-utilizados",children:"\ud83d\udee0\ufe0f M\xf3dulos utilizados"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"ProductosDTO"}),", ",(0,s.jsx)(r.code,{children:"productoSchema"}),": Modelos de datos y validaciones con Zod."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"Productos.service"}),": Contiene la l\xf3gica de negocio para las operaciones CRUD y los filtros de productos."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"ResponseMessage"}),", ",(0,s.jsx)(r.code,{children:"ResponseMessageWithData"}),": Interfaces que definen la estructura de las respuestas del controlador."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"checkPermissions.ts"}),": Funci\xf3n para validar permisos de acciones seg\xfan el rol del usuario."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"token.middleware.ts"}),": Middleware para autenticaci\xf3n de usuarios mediante JWT."]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h3,{id:"-ejemplos-de-uso-de-la-api-de-productos",children:"\ud83d\udcd8 Ejemplos de uso de la API de Productos"}),"\n",(0,s.jsxs)(r.h4,{id:"-get-productos",children:["\ud83d\udd39 GET ",(0,s.jsx)(r.code,{children:"/Productos"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"\ud83e\uddea Ejemplo de respuesta:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'[\r\n  {\r\n    "id": 1,\r\n    "nombre": "Laptop Dell",\r\n    "categoria": "Tecnolog\xeda",\r\n    "estado": "Nuevo",\r\n    "fechaAdquisicion": "2024-01-20T00:00:00.000Z",\r\n    "fechaVencimiento": null,\r\n    "usuarioId": 3\r\n  },\r\n  {\r\n    "id": 2,\r\n    "nombre": "Camisa Polo",\r\n    "categoria": "Ropa",\r\n    "estado": "Usado",\r\n    "fechaAdquisicion": "2023-11-10T00:00:00.000Z",\r\n    "fechaVencimiento": null,\r\n    "usuarioId": 4\r\n  }\r\n]\n'})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h4,{id:"-get-productoscategorias",children:["\ud83d\udd39 GET ",(0,s.jsx)(r.code,{children:"/Productos/categorias"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"\ud83e\uddea Ejemplo de respuesta:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'[\r\n  "Tecnolog\xeda",\r\n  "Ropa",\r\n  "Hogar",\r\n  "Sin categor\xeda"\r\n]\n'})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h4,{id:"-get-productospor-categoriacategoriatecnolog\xeda",children:["\ud83d\udd39 GET ",(0,s.jsx)(r.code,{children:"/Productos/por-categoria?categoria=Tecnolog\xeda"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"\ud83e\uddea Ejemplo de respuesta:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'[\r\n  {\r\n    "id": 1,\r\n    "nombre": "Laptop Dell",\r\n    "categoria": "Tecnolog\xeda",\r\n    "estado": "Nuevo",\r\n    "fechaAdquisicion": "2024-01-20T00:00:00.000Z"\r\n  }\r\n]\n'})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h4,{id:"-get-productoscantidad-por-categoria",children:["\ud83d\udd39 GET ",(0,s.jsx)(r.code,{children:"/Productos/cantidad-por-categoria"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"\ud83e\uddea Ejemplo de respuesta:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'[\r\n  { "categoria": "Tecnolog\xeda", "cantidad": 12 },\r\n  { "categoria": "Ropa", "cantidad": 7 },\r\n  { "categoria": "Sin categor\xeda", "cantidad": 3 }\r\n]\n'})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h4,{id:"-get-productoscantidad-por-rango-precio",children:["\ud83d\udd39 GET ",(0,s.jsx)(r.code,{children:"/Productos/cantidad-por-rango-precio"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"\ud83e\uddea Ejemplo de respuesta:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'[\r\n  { "rango": "$0 - $100", "cantidad": 5 },\r\n  { "rango": "$100 - $500", "cantidad": 9 },\r\n  { "rango": "$500+", "cantidad": 4 }\r\n]\n'})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h4,{id:"-post-productos",children:["\ud83d\udd39 POST ",(0,s.jsx)(r.code,{children:"/Productos"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"\ud83e\uddea Ejemplo de request:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\r\n  "nombre": "Monitor Samsung",\r\n  "categoria": "Tecnolog\xeda",\r\n  "estado": "Nuevo",\r\n  "fechaAdquisicion": "2025-03-15",\r\n  "fechaVencimiento": null,\r\n  "usuarioId": 3\r\n}\n'})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"\ud83e\uddea Ejemplo de respuesta:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\r\n  "message": "Producto creado correctamente",\r\n  "data": {\r\n    "id": 5,\r\n    "nombre": "Monitor Samsung",\r\n    "categoria": "Tecnolog\xeda",\r\n    "estado": "Nuevo",\r\n    "fechaAdquisicion": "2025-03-15T00:00:00.000Z",\r\n    "fechaVencimiento": null,\r\n    "usuarioId": 3\r\n}\n'})})]})}function h(e={}){const{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},8453:(e,r,d)=>{d.d(r,{R:()=>n,x:()=>i});var o=d(6540);const s={},c=o.createContext(s);function n(e){const r=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:n(e.components),o.createElement(c.Provider,{value:r},e.children)}}}]);