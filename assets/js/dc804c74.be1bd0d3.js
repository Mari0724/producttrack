"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4402],{5386:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"backend/routes/ocr-routes","title":"Rutas OCR","description":"Este archivo define las rutas del backend relacionadas con el an\xe1lisis por OCR para el m\xf3dulo NutriScan, permitiendo tanto el procesamiento de una imagen subida por el usuario como la confirmaci\xf3n manual del texto extra\xeddo.","source":"@site/docs/backend/routes/ocr.routes.md","sourceDirName":"backend/routes","slug":"/backend/routes/ocr-routes","permalink":"/producttrack/docs/backend/routes/ocr-routes","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/backend/routes/ocr.routes.md","tags":[],"version":"current","frontMatter":{"id":"ocr-routes","title":"Rutas OCR","sidebar_label":"OCR"},"sidebar":"tutorialSidebar","previous":{"title":"User Model","permalink":"/producttrack/docs/backend/models/UserModel"},"next":{"title":"User Routes","permalink":"/producttrack/docs/backend/routes/user.routes"}}');var s=n(4848),d=n(8453);const i={id:"ocr-routes",title:"Rutas OCR",sidebar_label:"OCR"},t="ocr.routes.ts",c={},a=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\ud83d\udccc Prop\xf3sito",id:"-prop\xf3sito",level:2},{value:"\ud83e\udde9 Importaciones clave",id:"-importaciones-clave",level:2},{value:"\ud83d\udea6 Definici\xf3n de rutas",id:"-definici\xf3n-de-rutas",level:2},{value:"\ud83d\udccc <code>POST /nutriscan-ocr</code>",id:"-post-nutriscan-ocr",level:3},{value:"\ud83d\udccc <code>POST /confirmar-nombre</code>",id:"-post-confirmar-nombre",level:3},{value:"\u2705 Ejemplo de uso (cliente frontend)",id:"-ejemplo-de-uso-cliente-frontend",level:2},{value:"Env\xedo de imagen por formulario:",id:"env\xedo-de-imagen-por-formulario",level:3},{value:"Confirmar nombre manual:",id:"confirmar-nombre-manual",level:3},{value:"\ud83d\udcdd Resumen",id:"-resumen",level:2},{value:"\ud83e\udde0 Notas adicionales",id:"-notas-adicionales",level:2}];function l(e){const r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"ocrroutests",children:"ocr.routes.ts"})}),"\n",(0,s.jsxs)(r.p,{children:["Este archivo define las rutas del backend relacionadas con el an\xe1lisis por OCR para el m\xf3dulo ",(0,s.jsx)(r.strong,{children:"NutriScan"}),", permitiendo tanto el procesamiento de una imagen subida por el usuario como la confirmaci\xf3n manual del texto extra\xeddo."]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.code,{children:"src/routes/ocr.routes.ts"})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-prop\xf3sito",children:"\ud83d\udccc Prop\xf3sito"}),"\n",(0,s.jsx)(r.p,{children:"Agrupar y exponer las rutas que permiten:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"Subir una imagen para extraer texto usando OCR."}),"\n",(0,s.jsx)(r.li,{children:"Confirmar o corregir manualmente el texto extra\xeddo por el sistema."}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-importaciones-clave",children:"\ud83e\udde9 Importaciones clave"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"import express from 'express';\r\nimport { uploadMemory } from '../middleware/uploadMemory';\r\nimport { extraerTextoDesdeImagen, confirmarNombreManual } from '../controllers/ocr.controller';\n"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"M\xf3dulo"}),(0,s.jsx)(r.th,{children:"Prop\xf3sito"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"express"})}),(0,s.jsx)(r.td,{children:"Framework web para crear rutas y middleware."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uploadMemory"})}),(0,s.jsxs)(r.td,{children:["Middleware que usa ",(0,s.jsx)(r.code,{children:"multer"})," para cargar im\xe1genes en memoria."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ocr.controller"})}),(0,s.jsx)(r.td,{children:"Controladores que procesan OCR y confirmaciones de texto."})]})]})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-definici\xf3n-de-rutas",children:"\ud83d\udea6 Definici\xf3n de rutas"}),"\n",(0,s.jsxs)(r.h3,{id:"-post-nutriscan-ocr",children:["\ud83d\udccc ",(0,s.jsx)(r.code,{children:"POST /nutriscan-ocr"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"router.post('/nutriscan-ocr', uploadMemory.single('imagen'), extraerTextoDesdeImagen);\n"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Elemento"}),(0,s.jsx)(r.th,{children:"Detalle"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"M\xe9todo"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"POST"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Ruta"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/nutriscan-ocr"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Middleware"}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"uploadMemory.single('imagen')"})," - Procesa una \xfanica imagen en memoria."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Controlador asociado"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"extraerTextoDesdeImagen"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Prop\xf3sito"}),(0,s.jsx)(r.td,{children:"Recibe una imagen, la procesa con OCR y devuelve el texto detectado."})]})]})]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\ud83e\udde0 Ideal para escanear etiquetas de productos alimenticios en tiempo real."}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h3,{id:"-post-confirmar-nombre",children:["\ud83d\udccc ",(0,s.jsx)(r.code,{children:"POST /confirmar-nombre"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"router.post('/confirmar-nombre', confirmarNombreManual);\n"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Elemento"}),(0,s.jsx)(r.th,{children:"Detalle"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"M\xe9todo"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"POST"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Ruta"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/confirmar-nombre"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Controlador asociado"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"confirmarNombreManual"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Prop\xf3sito"}),(0,s.jsx)(r.td,{children:"Permite al usuario confirmar o ajustar el nombre del producto"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Body esperado"}),(0,s.jsx)(r.td,{children:"Texto manual enviado desde el frontend"})]})]})]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\ud83d\udd0e \xdatil cuando el OCR no logra identificar correctamente el nombre del producto."}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-ejemplo-de-uso-cliente-frontend",children:"\u2705 Ejemplo de uso (cliente frontend)"}),"\n",(0,s.jsx)(r.h3,{id:"env\xedo-de-imagen-por-formulario",children:"Env\xedo de imagen por formulario:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"const formData = new FormData();\r\nformData.append('imagen', archivoSeleccionado);\r\n\r\nawait fetch('/api/nutriscan-ocr', {\r\n  method: 'POST',\r\n  body: formData,\r\n});\n"})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h3,{id:"confirmar-nombre-manual",children:"Confirmar nombre manual:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"await fetch('/api/confirmar-nombre', {\r\n  method: 'POST',\r\n  headers: { 'Content-Type': 'application/json' },\r\n  body: JSON.stringify({ nombre: 'Chocoramo' }),\r\n});\n"})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-resumen",children:"\ud83d\udcdd Resumen"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Ruta"}),(0,s.jsx)(r.th,{children:"M\xe9todo"}),(0,s.jsx)(r.th,{children:"Middleware"}),(0,s.jsx)(r.th,{children:"Controlador"}),(0,s.jsx)(r.th,{children:"Prop\xf3sito"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/nutriscan-ocr"})}),(0,s.jsx)(r.td,{children:"POST"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"uploadMemory.single()"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"extraerTextoDesdeImagen"})}),(0,s.jsx)(r.td,{children:"Procesar imagen y extraer texto OCR"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"/confirmar-nombre"})}),(0,s.jsx)(r.td,{children:"POST"}),(0,s.jsx)(r.td,{children:"-"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"confirmarNombreManual"})}),(0,s.jsx)(r.td,{children:"Confirmar o corregir el texto extra\xeddo"})]})]})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-notas-adicionales",children:"\ud83e\udde0 Notas adicionales"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"uploadMemory"})," es ideal cuando no se requiere almacenamiento persistente de archivos."]}),"\n",(0,s.jsx)(r.li,{children:"Estas rutas est\xe1n pensadas para integrarse con sistemas de an\xe1lisis como OpenAI (GPT) o bases como Open Food Facts."}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>t});var o=n(6540);const s={},d=o.createContext(s);function i(e){const r=o.useContext(d);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(d.Provider,{value:r},e.children)}}}]);