"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4340],{1289:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>m,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"frontend/components/empresarial/comentarios-modal","title":"Modal de Comentarios por Producto","description":"Este componente React muestra una interfaz modal para visualizar y agregar comentarios asociados a un producto espec\xedfico. Est\xe1 dise\xf1ado para usuarios con permisos seg\xfan su rol y tipo. Utiliza l\xf3gica interna para manejar comentarios de forma asincr\xf3nica y muestra retroalimentaci\xf3n con react-hot-toast.","source":"@site/docs/frontend/components/empresarial/CompanyCommentsModal.md","sourceDirName":"frontend/components/empresarial","slug":"/frontend/components/empresarial/comentarios-modal","permalink":"/producttrack/docs/frontend/components/empresarial/comentarios-modal","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/frontend/components/empresarial/CompanyCommentsModal.md","tags":[],"version":"current","frontMatter":{"id":"comentarios-modal","title":"Modal de Comentarios por Producto","sidebar_label":"CompanyCommentsModal"},"sidebar":"tutorialSidebar","previous":{"title":"Topbar","permalink":"/producttrack/docs/frontend/components/topbar"},"next":{"title":"CommentsModal","permalink":"/producttrack/docs/frontend/components/individual/comentarios-modal-producto"}}');var s=o(4848),a=o(8453);const i={id:"comentarios-modal",title:"Modal de Comentarios por Producto",sidebar_label:"CompanyCommentsModal"},c=void 0,t={},d=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\ud83d\udce6 Dependencias utilizadas",id:"-dependencias-utilizadas",level:2},{value:"\ud83e\udde9 Propiedades del componente",id:"-propiedades-del-componente",level:2},{value:"\ud83d\udd27 L\xf3gica interna",id:"-l\xf3gica-interna",level:2},{value:"\ud83d\udce5 Lectura de comentarios",id:"-lectura-de-comentarios",level:3},{value:"\ud83d\udcdd Creaci\xf3n de nuevos comentarios",id:"-creaci\xf3n-de-nuevos-comentarios",level:3},{value:"\ud83d\udd10 Control de permisos",id:"-control-de-permisos",level:3},{value:"\ud83d\udcac Estructura del comentario",id:"-estructura-del-comentario",level:2},{value:"\ud83d\udca1 Ejemplo de uso",id:"-ejemplo-de-uso",level:2},{value:"\ud83d\udcdd Notas adicionales",id:"-notas-adicionales",level:2}];function l(e){const n={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Este componente React muestra una interfaz modal para ",(0,s.jsx)(n.strong,{children:"visualizar y agregar comentarios"})," asociados a un producto espec\xedfico. Est\xe1 dise\xf1ado para usuarios con permisos seg\xfan su rol y tipo. Utiliza l\xf3gica interna para manejar comentarios de forma asincr\xf3nica y muestra retroalimentaci\xf3n con ",(0,s.jsx)(n.code,{children:"react-hot-toast"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"src/components/empresarial/CompanyCommentsModal.tsx"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-dependencias-utilizadas",children:"\ud83d\udce6 Dependencias utilizadas"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import React, { useState, useEffect } from 'react';\r\nimport { AiOutlineClose } from 'react-icons/ai';\r\nimport { getComentariosPorProducto, crearComentario } from '../../api/comentarios';\r\nimport toast from 'react-hot-toast';\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"React"}),": Para gestionar el estado y ciclo de vida del componente."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"AiOutlineClose"}),": \xcdcono de cierre del modal (",(0,s.jsx)(n.code,{children:"react-icons"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"getComentariosPorProducto / crearComentario"}),": Funciones API para manejar los comentarios."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"toast"}),": Biblioteca para mostrar notificaciones al usuario."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-propiedades-del-componente",children:"\ud83e\udde9 Propiedades del componente"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface CompanyCommentsModalProps {\r\n  productId: number;\r\n  productName: string;\r\n  onClose: () => void;\r\n}\n"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Propiedad"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"productId"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"number"})}),(0,s.jsx)(n.td,{children:"ID del producto del cual se muestran comentarios."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"productName"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Nombre del producto (para mostrar en el modal)."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onClose"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"() => void"})}),(0,s.jsx)(n.td,{children:"Funci\xf3n para cerrar el modal."})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-l\xf3gica-interna",children:"\ud83d\udd27 L\xf3gica interna"}),"\n",(0,s.jsx)(n.h3,{id:"-lectura-de-comentarios",children:"\ud83d\udce5 Lectura de comentarios"}),"\n",(0,s.jsx)(n.p,{children:"Se ejecuta una petici\xf3n al montar el componente para obtener los comentarios existentes del producto:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"useEffect(() => {\r\n  const fetchComments = async () => {\r\n    const res = await getComentariosPorProducto(productId);\r\n    // Mapea los comentarios a un formato uniforme\r\n  };\r\n  fetchComments();\r\n}, [productId]);\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"getComentariosPorProducto"})})," consulta al backend por comentarios asociados al ",(0,s.jsx)(n.code,{children:"productId"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Los comentarios se formatean para mostrar la fecha de creaci\xf3n."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"-creaci\xf3n-de-nuevos-comentarios",children:"\ud83d\udcdd Creaci\xf3n de nuevos comentarios"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const handleAddComment = async () => {\r\n  await crearComentario({\r\n    idUsuario: userId,\r\n    idProducto: productId,\r\n    comentario: newComment,\r\n  });\r\n};\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verifica que el campo de comentario no est\xe9 vac\xedo."}),"\n",(0,s.jsxs)(n.li,{children:["Env\xeda el comentario con ",(0,s.jsx)(n.code,{children:"crearComentario"}),", usando el ID del usuario y producto."]}),"\n",(0,s.jsx)(n.li,{children:"Si la operaci\xf3n es exitosa, se actualiza la lista local de comentarios y se muestra una notificaci\xf3n de \xe9xito."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"-control-de-permisos",children:"\ud83d\udd10 Control de permisos"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'const puedeComentar = tipoUsuario === "EMPRESARIAL" || userRol === "EDITOR" || userRol === "COMENTARISTA";\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Solo los usuarios con ciertos roles pueden comentar."}),"\n",(0,s.jsx)(n.li,{children:"Si el rol no est\xe1 autorizado, no podr\xe1 comentar."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-estructura-del-comentario",children:"\ud83d\udcac Estructura del comentario"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface Comment {\r\n  id: number;\r\n  text: string;\r\n  user: string;\r\n  date: string;\r\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Cada comentario mostrado contiene:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Texto (",(0,s.jsx)(n.code,{children:"text"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Usuario autor (",(0,s.jsx)(n.code,{children:"user"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Fecha (",(0,s.jsx)(n.code,{children:"date"}),", con formato ",(0,s.jsx)(n.code,{children:"YYYY-MM-DD"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-ejemplo-de-uso",children:"\ud83d\udca1 Ejemplo de uso"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'<CompanyCommentsModal\r\n  productId={42}\r\n  productName="Caf\xe9 org\xe1nico"\r\n  onClose={() => setShowModal(false)}\r\n/>\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Muestra un modal con comentarios del producto con ID ",(0,s.jsx)(n.code,{children:"42"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Permite a usuarios empresariales o con rol adecuado escribir un nuevo comentario."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-notas-adicionales",children:"\ud83d\udcdd Notas adicionales"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Este componente es ",(0,s.jsx)(n.strong,{children:"autocontenible"})," y no necesita ser envuelto por un ",(0,s.jsx)(n.code,{children:"Provider"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Utiliza ",(0,s.jsx)(n.code,{children:"localStorage"})," para recuperar datos del usuario actual (ID, nombre, rol)."]}),"\n",(0,s.jsx)(n.li,{children:"Los comentarios se actualizan din\xe1micamente sin necesidad de recargar la p\xe1gina."}),"\n",(0,s.jsxs)(n.li,{children:["Se incluye feedback visual y accesibilidad b\xe1sica (",(0,s.jsx)(n.code,{children:"toast"}),", scroll, cierre de modal)."]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>c});var r=o(6540);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);