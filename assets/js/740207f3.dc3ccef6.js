"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5258],{6882:(e,d,s)=>{s.r(d),s.d(d,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"backend/models/UserModel","title":"Validaciones de User","description":"Define el esquema de validaci\xf3n para el modelo de usuario (userSchema) utilizando Zod, con m\xfaltiples reglas que garantizan integridad, formato correcto y l\xf3gica condicional seg\xfan el tipo y rol del usuario.","source":"@site/docs/backend/models/UserModel.md","sourceDirName":"backend/models","slug":"/backend/models/UserModel","permalink":"/producttrack/docs/backend/models/UserModel","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/backend/models/UserModel.md","tags":[],"version":"current","frontMatter":{"id":"UserModel","title":"Validaciones de User","sidebar_label":"User Model"},"sidebar":"tutorialSidebar","previous":{"title":"User DTO","permalink":"/producttrack/docs/backend/models/UserDTO"},"next":{"title":"OCR","permalink":"/producttrack/docs/backend/routes/ocr-routes"}}');var r=s(4848),n=s(8453);const c={id:"UserModel",title:"Validaciones de User",sidebar_label:"User Model"},l="UserModel",o={},t=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\ud83e\udde9 Esquema base (<code>userSchema</code>)",id:"-esquema-base-userschema",level:2},{value:"\u2705 Validaciones adicionales (<code>.refine()</code>)",id:"-validaciones-adicionales-refine",level:2},{value:"\ud83e\uddea Tipo inferido",id:"-tipo-inferido",level:2}];function a(e){const d={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.header,{children:(0,r.jsx)(d.h1,{id:"usermodel",children:"UserModel"})}),"\n",(0,r.jsxs)(d.p,{children:["Define el ",(0,r.jsx)(d.strong,{children:"esquema de validaci\xf3n"})," para el modelo de usuario (",(0,r.jsx)(d.code,{children:"userSchema"}),") utilizando ",(0,r.jsx)(d.code,{children:"Zod"}),", con m\xfaltiples reglas que garantizan integridad, formato correcto y l\xf3gica condicional seg\xfan el tipo y rol del usuario."]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,r.jsx)(d.p,{children:(0,r.jsx)(d.code,{children:"src/models/EquipoDTO.ts"})}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsxs)(d.h2,{id:"-esquema-base-userschema",children:["\ud83e\udde9 Esquema base (",(0,r.jsx)(d.code,{children:"userSchema"}),")"]}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo/Zod"}),(0,r.jsx)(d.th,{children:"Obligatorio"}),(0,r.jsx)(d.th,{children:"Validaciones y Reglas"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"username"})}),(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"string()"})}),(0,r.jsx)(d.td,{children:"\u2705 S\xed"}),(0,r.jsx)(d.td,{children:"M\xednimo 3 caracteres, sin espacios extremos."})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"correo"})}),(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"string().email()"})}),(0,r.jsx)(d.td,{children:"\u2705 S\xed"}),(0,r.jsx)(d.td,{children:"Debe ser un correo v\xe1lido."})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"password"})}),(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"string()"})}),(0,r.jsx)(d.td,{children:"\u2705 S\xed"}),(0,r.jsx)(d.td,{children:"M\xednimo 8 caracteres, debe incluir: una may\xfascula, una min\xfascula, un n\xfamero y un car\xe1cter especial."})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"nombreCompleto"})}),(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"string()"})}),(0,r.jsx)(d.td,{children:"\u2705 S\xed"}),(0,r.jsx)(d.td,{children:"M\xednimo 3 caracteres."})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"telefono"})}),(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"string().regex()"})}),(0,r.jsx)(d.td,{children:"\u2705 S\xed"}),(0,r.jsx)(d.td,{children:"Formato internacional y nacional aceptado."})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"direccion"})}),(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"string()"})}),(0,r.jsx)(d.td,{children:"\u2705 S\xed"}),(0,r.jsx)(d.td,{children:"M\xednimo 5 caracteres."})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"fotoPerfil"})}),(0,r.jsxs)(d.td,{children:[(0,r.jsx)(d.code,{children:"string().url()"})," ",(0,r.jsx)(d.em,{children:"(opcional)"})]}),(0,r.jsx)(d.td,{children:"\u274c No"}),(0,r.jsx)(d.td,{children:"Debe ser una URL v\xe1lida."})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"nombreEmpresa"})}),(0,r.jsxs)(d.td,{children:[(0,r.jsx)(d.code,{children:"string()"})," ",(0,r.jsx)(d.em,{children:"(opcional)"})]}),(0,r.jsx)(d.td,{children:"\u274c Condicional"}),(0,r.jsxs)(d.td,{children:["Requerido si ",(0,r.jsx)(d.code,{children:"tipoUsuario"})," es ",(0,r.jsx)(d.code,{children:'"EMPRESARIAL"'}),"."]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"nit"})}),(0,r.jsxs)(d.td,{children:[(0,r.jsx)(d.code,{children:"string().regex()"})," ",(0,r.jsx)(d.em,{children:"(opcional)"})]}),(0,r.jsx)(d.td,{children:"\u274c Condicional"}),(0,r.jsxs)(d.td,{children:["Entre 9 y 15 d\xedgitos. Obligatorio para tipo ",(0,r.jsx)(d.code,{children:'"EMPRESARIAL"'}),"."]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"estado"})}),(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:'enum(["activo", "inactivo"])'})}),(0,r.jsx)(d.td,{children:"\u274c No"}),(0,r.jsxs)(d.td,{children:["Por defecto ",(0,r.jsx)(d.code,{children:'"activo"'}),"."]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"rol"})}),(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:'enum(["USUARIO", "EQUIPO", "ADMIN", "DESARROLLADOR"])'})}),(0,r.jsx)(d.td,{children:"\u2705 S\xed"}),(0,r.jsx)(d.td,{children:"Define el tipo de rol principal del usuario."})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"rolEquipo"})}),(0,r.jsxs)(d.td,{children:[(0,r.jsx)(d.code,{children:'enum(["LECTOR", "COMENTARISTA", "EDITOR"])'})," ",(0,r.jsx)(d.em,{children:"(opcional)"})]}),(0,r.jsx)(d.td,{children:"\u274c No"}),(0,r.jsxs)(d.td,{children:["Aplica si ",(0,r.jsx)(d.code,{children:"rol"})," es ",(0,r.jsx)(d.code,{children:'"EQUIPO"'}),"."]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"tipoUsuario"})}),(0,r.jsxs)(d.td,{children:[(0,r.jsx)(d.code,{children:'enum(["INDIVIDUAL", "EMPRESARIAL"])'})," ",(0,r.jsx)(d.em,{children:"(opcional)"})]}),(0,r.jsx)(d.td,{children:"\u274c Condicional"}),(0,r.jsxs)(d.td,{children:["Requerido si ",(0,r.jsx)(d.code,{children:"rol"})," es ",(0,r.jsx)(d.code,{children:'"USUARIO"'}),"."]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"empresaId"})}),(0,r.jsxs)(d.td,{children:[(0,r.jsx)(d.code,{children:"number().int().positive()"})," ",(0,r.jsx)(d.em,{children:"(opcional)"})]}),(0,r.jsx)(d.td,{children:"\u274c Condicional"}),(0,r.jsxs)(d.td,{children:["Requerido si ",(0,r.jsx)(d.code,{children:"rol"})," es ",(0,r.jsx)(d.code,{children:'"EQUIPO"'}),"."]})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"perfilCompleto"})}),(0,r.jsxs)(d.td,{children:[(0,r.jsx)(d.code,{children:"boolean()"})," ",(0,r.jsx)(d.em,{children:"(opcional)"})]}),(0,r.jsx)(d.td,{children:"\u274c No"}),(0,r.jsx)(d.td,{children:"Indica si el perfil ha sido completado por el usuario."})]})]})]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsxs)(d.h2,{id:"-validaciones-adicionales-refine",children:["\u2705 Validaciones adicionales (",(0,r.jsx)(d.code,{children:".refine()"}),")"]}),"\n",(0,r.jsxs)(d.ol,{children:["\n",(0,r.jsxs)(d.li,{children:["\n",(0,r.jsx)(d.p,{children:(0,r.jsxs)(d.strong,{children:[(0,r.jsx)(d.code,{children:"tipoUsuario"})," obligatorio si el rol es ",(0,r.jsx)(d.code,{children:"USUARIO"})]})}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:["\ud83d\udd12 Si ",(0,r.jsx)(d.code,{children:"rol"})," es ",(0,r.jsx)(d.code,{children:'"USUARIO"'}),", entonces ",(0,r.jsx)(d.code,{children:"tipoUsuario"})," es obligatorio."]}),"\n",(0,r.jsxs)(d.li,{children:["\ud83e\udde0 Mensaje: ",(0,r.jsx)(d.em,{children:'"El tipo de usuario es obligatorio si el rol es USUARIO."'})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(d.li,{children:["\n",(0,r.jsx)(d.p,{children:(0,r.jsxs)(d.strong,{children:[(0,r.jsx)(d.code,{children:"nombreEmpresa"})," y ",(0,r.jsx)(d.code,{children:"nit"})," requeridos para ",(0,r.jsx)(d.code,{children:"EMPRESARIAL"})]})}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:["\ud83d\udd12 Si ",(0,r.jsx)(d.code,{children:"tipoUsuario"})," es ",(0,r.jsx)(d.code,{children:'"EMPRESARIAL"'}),", debe incluir ambos campos."]}),"\n",(0,r.jsxs)(d.li,{children:["\ud83e\udde0 Mensaje: ",(0,r.jsx)(d.em,{children:'"El nombre de la empresa y el NIT son obligatorios para los usuarios empresariales."'})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(d.li,{children:["\n",(0,r.jsx)(d.p,{children:(0,r.jsxs)(d.strong,{children:[(0,r.jsx)(d.code,{children:"empresaId"})," requerido para ",(0,r.jsx)(d.code,{children:"EQUIPO"})]})}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:["\ud83d\udd12 Si ",(0,r.jsx)(d.code,{children:"rol"})," es ",(0,r.jsx)(d.code,{children:'"EQUIPO"'}),", debe incluir ",(0,r.jsx)(d.code,{children:"empresaId"})," num\xe9rico positivo."]}),"\n",(0,r.jsxs)(d.li,{children:["\ud83e\udde0 Mensaje: ",(0,r.jsx)(d.em,{children:"\"El campo 'empresaId' es obligatorio para usuarios con rol EQUIPO.\""})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(d.li,{children:["\n",(0,r.jsx)(d.p,{children:(0,r.jsxs)(d.strong,{children:["Restricci\xf3n para ",(0,r.jsx)(d.code,{children:"INDIVIDUAL"}),": no debe tener ",(0,r.jsx)(d.code,{children:"nombreEmpresa"})," ni ",(0,r.jsx)(d.code,{children:"nit"})]})}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:["\ud83d\udd12 Si ",(0,r.jsx)(d.code,{children:"tipoUsuario"})," es ",(0,r.jsx)(d.code,{children:'"INDIVIDUAL"'}),", entonces ",(0,r.jsx)(d.strong,{children:"NO"})," debe incluir ",(0,r.jsx)(d.code,{children:"nombreEmpresa"})," ni ",(0,r.jsx)(d.code,{children:"nit"}),"."]}),"\n",(0,r.jsxs)(d.li,{children:["\ud83e\udde0 Mensaje: ",(0,r.jsx)(d.em,{children:'"Los usuarios individuales no deben tener nombre de empresa ni NIT."'})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h2,{id:"-tipo-inferido",children:"\ud83e\uddea Tipo inferido"}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-ts",children:"export type ValidatedUser = z.infer<typeof userSchema>;\n"})}),"\n",(0,r.jsx)(d.hr,{})]})}function h(e={}){const{wrapper:d}={...(0,n.R)(),...e.components};return d?(0,r.jsx)(d,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,d,s)=>{s.d(d,{R:()=>c,x:()=>l});var i=s(6540);const r={},n=i.createContext(r);function c(e){const d=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function l(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(n.Provider,{value:d},e.children)}}}]);