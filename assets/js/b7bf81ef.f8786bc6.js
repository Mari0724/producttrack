"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6338],{6662:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>t,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"backend/services/equipo.service","title":"Servicio Equipo","description":"Este servicio administra a los usuarios del tipo EQUIPO dentro de una empresa. Permite crear, consultar, filtrar, actualizar y eliminar registros del rol EQUIPO.","source":"@site/docs/backend/services/equipo.service.md","sourceDirName":"backend/services","slug":"/backend/services/equipo.service","permalink":"/producttrack/docs/backend/services/equipo.service","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/backend/services/equipo.service.md","tags":[],"version":"current","frontMatter":{"id":"equipo.service","title":"Servicio Equipo","sidebar_label":"Equipo Service"},"sidebar":"tutorialSidebar","previous":{"title":"User Routes","permalink":"/producttrack/docs/backend/routes/user.routes"},"next":{"title":"GPT","permalink":"/producttrack/docs/backend/services/gpt.service"}}');var s=i(4848),a=i(8453);const o={id:"equipo.service",title:"Servicio Equipo",sidebar_label:"Equipo Service"},l="Equipo Service",d={},c=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\ud83d\udce6 Dependencias",id:"-dependencias",level:2},{value:"\ud83e\udde9 Clase: <code>EquipoService</code>",id:"-clase-equiposervice",level:2},{value:"\ud83d\udee0\ufe0f <code>async crearEquipo(data: EquipoDTO, empresaId: number)</code>",id:"\ufe0f-async-crearequipodata-equipodto-empresaid-number",level:3},{value:"Par\xe1metros:",id:"par\xe1metros",level:4},{value:"Retorna:",id:"retorna",level:4},{value:"Lanza:",id:"lanza",level:4},{value:"\ud83d\udcc4 <code>async obtenerTodosLosEquipos()</code>",id:"-async-obtenertodoslosequipos",level:3},{value:"Retorna:",id:"retorna-1",level:4},{value:"\ud83d\udd0d <code>async filtrarEquipos(filtros: {...})</code>",id:"-async-filtrarequiposfiltros-",level:3},{value:"Par\xe1metros:",id:"par\xe1metros-1",level:4},{value:"Retorna:",id:"retorna-2",level:4},{value:"Observaciones:",id:"observaciones",level:4},{value:"\ud83d\udd0e <code>async obtenerEquipoPorId(id: number)</code>",id:"-async-obtenerequipoporidid-number",level:3},{value:"Par\xe1metros:",id:"par\xe1metros-2",level:4},{value:"Retorna:",id:"retorna-3",level:4},{value:"Lanza:",id:"lanza-1",level:4},{value:"\u270f\ufe0f <code>async actualizarEquipo(id: number, datosActualizados: Partial&lt;EquipoDTO&gt;, empresaId?: number)</code>",id:"\ufe0f-async-actualizarequipoid-number-datosactualizados-partialequipodto-empresaid-number",level:3},{value:"Par\xe1metros:",id:"par\xe1metros-3",level:4},{value:"Retorna:",id:"retorna-4",level:4},{value:"Lanza:",id:"lanza-2",level:4},{value:"\ud83d\uddd1\ufe0f <code>async eliminarEquipo(id: number, empresaId?: number)</code>",id:"\ufe0f-async-eliminarequipoid-number-empresaid-number",level:3},{value:"Par\xe1metros:",id:"par\xe1metros-4",level:4},{value:"Retorna:",id:"retorna-5",level:4},{value:"Lanza:",id:"lanza-3",level:4},{value:"\ud83e\udde8 <code>async eliminarTodoElEquipo(empresaId: number)</code>",id:"-async-eliminartodoelequipoempresaid-number",level:3},{value:"Par\xe1metros:",id:"par\xe1metros-5",level:4},{value:"Retorna:",id:"retorna-6",level:4},{value:"\u2705 Validaci\xf3n",id:"-validaci\xf3n",level:2},{value:"\ud83e\uddea Ejemplo de uso",id:"-ejemplo-de-uso",level:2}];function u(e){const r={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"equipo-service",children:"Equipo Service"})}),"\n",(0,s.jsxs)(r.p,{children:["Este servicio administra a los ",(0,s.jsx)(r.strong,{children:"usuarios del tipo EQUIPO"})," dentro de una empresa. Permite crear, consultar, filtrar, actualizar y eliminar registros del rol ",(0,s.jsx)(r.code,{children:"EQUIPO"}),"."]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.code,{children:"src/services/equipo.service.ts"})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-dependencias",children:"\ud83d\udce6 Dependencias"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"prisma"}),": Cliente ORM para interactuar con la base de datos."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"EquipoDTO"}),": Tipo de datos para validaci\xf3n de entradas."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"equipoSchema"}),": Esquema Zod que valida los datos de entrada."]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h2,{id:"-clase-equiposervice",children:["\ud83e\udde9 Clase: ",(0,s.jsx)(r.code,{children:"EquipoService"})]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h3,{id:"\ufe0f-async-crearequipodata-equipodto-empresaid-number",children:["\ud83d\udee0\ufe0f ",(0,s.jsx)(r.code,{children:"async crearEquipo(data: EquipoDTO, empresaId: number)"})]}),"\n",(0,s.jsxs)(r.p,{children:["Crea un nuevo usuario con rol ",(0,s.jsx)(r.code,{children:"EQUIPO"})," dentro de una empresa espec\xedfica."]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros",children:"Par\xe1metros:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"data"}),": Objeto con los datos del nuevo equipo (validado por ",(0,s.jsx)(r.code,{children:"equipoSchema"}),")."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"empresaId"}),": ID de la empresa a la que pertenece."]}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"retorna",children:"Retorna:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Objeto del equipo reci\xe9n creado."}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"lanza",children:"Lanza:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Error si los datos no cumplen el esquema de validaci\xf3n."}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h3,{id:"-async-obtenertodoslosequipos",children:["\ud83d\udcc4 ",(0,s.jsx)(r.code,{children:"async obtenerTodosLosEquipos()"})]}),"\n",(0,s.jsxs)(r.p,{children:["Obtiene todos los usuarios con rol ",(0,s.jsx)(r.code,{children:"EQUIPO"}),", sin aplicar filtros."]}),"\n",(0,s.jsx)(r.h4,{id:"retorna-1",children:"Retorna:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Lista de usuarios con el rol ",(0,s.jsx)(r.code,{children:"EQUIPO"}),"."]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h3,{id:"-async-filtrarequiposfiltros-",children:["\ud83d\udd0d ",(0,s.jsx)(r.code,{children:"async filtrarEquipos(filtros: {...})"})]}),"\n",(0,s.jsxs)(r.p,{children:["Permite aplicar m\xfaltiples filtros para buscar usuarios ",(0,s.jsx)(r.code,{children:"EQUIPO"}),"."]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros-1",children:"Par\xe1metros:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:'{\r\n  nombreCompleto?: string;\r\n  correo?: string;\r\n  rolEquipo?: "LECTOR" | "COMENTARISTA" | "EDITOR";\r\n  empresaId?: number;\r\n}\n'})}),"\n",(0,s.jsx)(r.h4,{id:"retorna-2",children:"Retorna:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Lista de equipos que cumplen con los criterios dados."}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"observaciones",children:"Observaciones:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["La b\xfasqueda por ",(0,s.jsx)(r.code,{children:"nombreCompleto"})," y ",(0,s.jsx)(r.code,{children:"correo"})," es insensible a may\xfasculas/min\xfasculas."]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h3,{id:"-async-obtenerequipoporidid-number",children:["\ud83d\udd0e ",(0,s.jsx)(r.code,{children:"async obtenerEquipoPorId(id: number)"})]}),"\n",(0,s.jsxs)(r.p,{children:["Busca un usuario ",(0,s.jsx)(r.code,{children:"EQUIPO"})," por su ",(0,s.jsx)(r.code,{children:"idUsuario"}),"."]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros-2",children:"Par\xe1metros:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"id"}),": Identificador \xfanico del usuario."]}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"retorna-3",children:"Retorna:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Objeto del equipo correspondiente."}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"lanza-1",children:"Lanza:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Error si el usuario no existe o no tiene rol ",(0,s.jsx)(r.code,{children:"EQUIPO"}),"."]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h3,{id:"\ufe0f-async-actualizarequipoid-number-datosactualizados-partialequipodto-empresaid-number",children:["\u270f\ufe0f ",(0,s.jsx)(r.code,{children:"async actualizarEquipo(id: number, datosActualizados: Partial<EquipoDTO>, empresaId?: number)"})]}),"\n",(0,s.jsxs)(r.p,{children:["Actualiza los datos de un usuario ",(0,s.jsx)(r.code,{children:"EQUIPO"}),"."]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros-3",children:"Par\xe1metros:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"id"}),": ID del equipo a actualizar."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"datosActualizados"}),": Objeto con los campos que se desean modificar."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"empresaId"}),": ",(0,s.jsx)(r.em,{children:"(Opcional)"})," ID de la empresa que posee al equipo. Si se incluye, se valida la pertenencia."]}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"retorna-4",children:"Retorna:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Objeto actualizado del equipo."}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"lanza-2",children:"Lanza:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Error si el equipo no existe o no pertenece a la empresa especificada (si se proporciona)."}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h3,{id:"\ufe0f-async-eliminarequipoid-number-empresaid-number",children:["\ud83d\uddd1\ufe0f ",(0,s.jsx)(r.code,{children:"async eliminarEquipo(id: number, empresaId?: number)"})]}),"\n",(0,s.jsxs)(r.p,{children:["Elimina un usuario ",(0,s.jsx)(r.code,{children:"EQUIPO"})," por ID."]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros-4",children:"Par\xe1metros:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"id"}),": Identificador del equipo a eliminar."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"empresaId"}),": ",(0,s.jsx)(r.em,{children:"(Opcional)"})," ID de la empresa. Si se incluye, valida pertenencia."]}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"retorna-5",children:"Retorna:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Objeto del equipo eliminado."}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"lanza-3",children:"Lanza:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Error si el usuario no existe o no tiene el rol correcto o no pertenece a la empresa."}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.h3,{id:"-async-eliminartodoelequipoempresaid-number",children:["\ud83e\udde8 ",(0,s.jsx)(r.code,{children:"async eliminarTodoElEquipo(empresaId: number)"})]}),"\n",(0,s.jsxs)(r.p,{children:["Elimina a ",(0,s.jsx)(r.strong,{children:"todos los usuarios del equipo"})," asociados a una empresa espec\xedfica."]}),"\n",(0,s.jsx)(r.h4,{id:"par\xe1metros-5",children:"Par\xe1metros:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"empresaId"}),": ID de la empresa cuyos equipos ser\xe1n eliminados."]}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"retorna-6",children:"Retorna:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Objeto con un mensaje que indica cu\xe1ntos equipos fueron eliminados."}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-validaci\xf3n",children:"\u2705 Validaci\xf3n"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Todos los datos se validan usando el esquema ",(0,s.jsx)(r.code,{children:"equipoSchema"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:["Se usa ",(0,s.jsx)(r.code,{children:".partial()"})," en ",(0,s.jsx)(r.code,{children:"actualizarEquipo()"})," para permitir actualizaciones parciales."]}),"\n",(0,s.jsxs)(r.li,{children:["Se verifica el rol ",(0,s.jsx)(r.code,{children:'"EQUIPO"'})," y opcionalmente la pertenencia a una empresa (",(0,s.jsx)(r.code,{children:"empresaId"}),")."]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:"-ejemplo-de-uso",children:"\ud83e\uddea Ejemplo de uso"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:'const servicio = new EquipoService();\r\n\r\n// Crear nuevo equipo\r\nawait servicio.crearEquipo({\r\n  nombreCompleto: "Juan P\xe9rez",\r\n  correo: "juan@empresa.com",\r\n  password: "segura123",\r\n  username: "jperez",\r\n  telefono: "3214567890",\r\n  direccion: "Calle 123",\r\n  rolEquipo: "EDITOR"\r\n}, 1);\r\n\r\n// Filtrar por empresa y rol\r\nconst resultado = await servicio.filtrarEquipos({\r\n  empresaId: 1,\r\n  rolEquipo: "LECTOR"\r\n});\r\n\r\n// Eliminar equipo individual\r\nawait servicio.eliminarEquipo(10, 1);\r\n\r\n// Eliminar a todos los equipos de una empresa\r\nawait servicio.eliminarTodoElEquipo(1);\n'})})]})}function t(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,r,i)=>{i.d(r,{R:()=>o,x:()=>l});var n=i(6540);const s={},a=n.createContext(s);function o(e){const r=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(a.Provider,{value:r},e.children)}}}]);