"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1081],{4443:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"backend/app","title":"Configuraci\xf3n principal de Express","description":"Este archivo inicializa y configura la aplicaci\xf3n backend utilizando Express.","source":"@site/docs/backend/app.md","sourceDirName":"backend","slug":"/backend/app","permalink":"/producttrack/docs/backend/app","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/backend/app.md","tags":[],"version":"current","frontMatter":{"id":"app","title":"Configuraci\xf3n principal de Express","sidebar_label":"app"},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udce6 Backend","permalink":"/producttrack/docs/backend/"},"next":{"title":"cloudinary","permalink":"/producttrack/docs/backend/config/cloudinary"}}');var i=s(4848),c=s(8453);const d={id:"app",title:"Configuraci\xf3n principal de Express",sidebar_label:"app"},o=void 0,a={},l=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\ud83d\udccc Descripci\xf3n general",id:"-descripci\xf3n-general",level:2},{value:"\ud83d\udd17 Uso",id:"-uso",level:2},{value:"\ud83e\udde9 Relaci\xf3n con otros m\xf3dulos",id:"-relaci\xf3n-con-otros-m\xf3dulos",level:2},{value:"\u26a0\ufe0f Consideraciones",id:"\ufe0f-consideraciones",level:2}];function t(e){const n={br:"br",code:"code",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Este archivo inicializa y configura la aplicaci\xf3n backend utilizando ",(0,i.jsx)(n.strong,{children:"Express"}),".",(0,i.jsx)(n.br,{}),"\n","Incluye configuraci\xf3n de CORS, middlewares, rutas, documentaci\xf3n Swagger y tareas programadas, adem\xe1s de definir el punto de entrada para iniciar el servidor."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"src/app.ts"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-descripci\xf3n-general",children:"\ud83d\udccc Descripci\xf3n general"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Importaci\xf3n de m\xf3dulos clave"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"express"}),", ",(0,i.jsx)(n.code,{children:"cors"}),", ",(0,i.jsx)(n.code,{children:"body-parser"})," para el servidor y middlewares."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"swagger-ui-express"})," para exponer la documentaci\xf3n de API."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"dotenv"})," para cargar variables de entorno."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"cronJobs"})," para iniciar tareas programadas."]}),"\n",(0,i.jsxs)(n.li,{children:["Rutas manuales (",(0,i.jsx)(n.code,{children:"ocr.routes"}),", ",(0,i.jsx)(n.code,{children:"user.routes"}),") y rutas generadas autom\xe1ticamente por ",(0,i.jsx)(n.strong,{children:"tsoa"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Carga de variables de entorno"}),(0,i.jsx)(n.br,{}),"\n","Se utiliza ",(0,i.jsx)(n.code,{children:"dotenv.config()"})," para leer el archivo ",(0,i.jsx)(n.code,{children:".env"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuraci\xf3n de CORS"}),(0,i.jsx)(n.br,{}),"\n","Restringe el acceso a or\xedgenes espec\xedficos (",(0,i.jsx)(n.code,{children:"localhost:5173"})," y ",(0,i.jsx)(n.code,{children:"localhost:5174"}),") y define los m\xe9todos y credenciales permitidas."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Middlewares de parsing"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bodyParser.json"})," y ",(0,i.jsx)(n.code,{children:"bodyParser.urlencoded"})," con l\xedmite de 3 MB para manejar datos entrantes en JSON o formularios."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Registro de rutas"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"/api/ocr"})," \u2192 Rutas de OCR."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"/api"})," \u2192 Rutas de usuario."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"RegisterRoutes(app)"})," \u2192 Registra las rutas generadas autom\xe1ticamente con tsoa."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Documentaci\xf3n Swagger"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Solo se carga en entornos que ",(0,i.jsx)(n.strong,{children:"no"})," sean producci\xf3n."]}),"\n",(0,i.jsxs)(n.li,{children:["Usa el archivo generado ",(0,i.jsx)(n.code,{children:"docs/swagger.json"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Subida de im\xe1genes"}),(0,i.jsx)(n.br,{}),"\n","Ruta ",(0,i.jsx)(n.code,{children:"POST /upload"})," que usa el middleware ",(0,i.jsx)(n.code,{children:"uploadProductos"})," para subir im\xe1genes a ",(0,i.jsx)(n.strong,{children:"Cloudinary"}),".",(0,i.jsx)(n.br,{}),"\n","Devuelve la URL y el ",(0,i.jsx)(n.code,{children:"public_id"})," del archivo subido."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Ruta ra\xedz (",(0,i.jsx)(n.code,{children:"/"}),")"]}),(0,i.jsx)(n.br,{}),"\n","Devuelve un mensaje de bienvenida e indica c\xf3mo probar las rutas en Swagger o Postman seg\xfan el entorno."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Inicio del servidor"}),(0,i.jsx)(n.br,{}),"\n","Escucha en el puerto definido en ",(0,i.jsx)(n.code,{children:"process.env.PORT"})," o en ",(0,i.jsx)(n.code,{children:"3000"})," por defecto."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-uso",children:"\ud83d\udd17 Uso"}),"\n",(0,i.jsxs)(n.p,{children:["Este archivo se ejecuta autom\xe1ticamente cuando se levanta el servidor.",(0,i.jsx)(n.br,{}),"\n","En un proyecto TypeScript, normalmente es invocado desde ",(0,i.jsx)(n.code,{children:"src/index.ts"})," o directamente con el comando de inicio (",(0,i.jsx)(n.code,{children:"npm run dev"})," / ",(0,i.jsx)(n.code,{children:"npm start"}),")."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-relaci\xf3n-con-otros-m\xf3dulos",children:"\ud83e\udde9 Relaci\xf3n con otros m\xf3dulos"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rutas manuales:"})," ",(0,i.jsx)(n.code,{children:"ocr.routes.ts"}),", ",(0,i.jsx)(n.code,{children:"user.routes.ts"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Middleware de subida de archivos:"})," ",(0,i.jsx)(n.code,{children:"allCloudinaryUploads"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rutas generadas:"})," ",(0,i.jsx)(n.code,{children:"routes/routes.ts"})," (producidas por tsoa)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tareas programadas:"})," ",(0,i.jsx)(n.code,{children:"utils/cronJobs.ts"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Documentaci\xf3n:"})," archivo ",(0,i.jsx)(n.code,{children:"docs/swagger.json"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-consideraciones",children:"\u26a0\ufe0f Consideraciones"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["En producci\xf3n, el endpoint ",(0,i.jsx)(n.code,{children:"/docs"})," (Swagger UI) est\xe1 deshabilitado por seguridad."]}),"\n",(0,i.jsxs)(n.li,{children:["El l\xedmite de 3 MB en ",(0,i.jsx)(n.code,{children:"bodyParser"})," puede ajustarse seg\xfan la necesidad de subida de datos."]}),"\n",(0,i.jsx)(n.li,{children:"El CORS est\xe1 limitado a entornos de desarrollo por dominio; si se despliega en otro dominio, debe actualizarse la configuraci\xf3n."}),"\n",(0,i.jsxs)(n.li,{children:["La subida de im\xe1genes requiere que las credenciales de Cloudinary est\xe9n correctamente configuradas en el ",(0,i.jsx)(n.code,{children:".env"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["El m\xf3dulo ",(0,i.jsx)(n.code,{children:"cronJobs"})," comienza a ejecutar tareas tan pronto como se importa."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>o});var r=s(6540);const i={},c=r.createContext(i);function d(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);