"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4190],{582:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>t,default:()=>m,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"backend/services/comentarios-service","title":"Servicio de Comentarios","description":"Este archivo define las funciones del servicio para manejar comentarios en productos. Se conecta a la base de datos mediante Prisma y gestiona operaciones CRUD (crear, leer, actualizar, eliminar), adem\xe1s de invocar notificaciones al crear un nuevo comentario.","source":"@site/docs/backend/services/comentarios.service.md","sourceDirName":"backend/services","slug":"/backend/services/comentarios-service","permalink":"/producttrack/docs/backend/services/comentarios-service","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/backend/services/comentarios.service.md","tags":[],"version":"current","frontMatter":{"id":"comentarios-service","title":"Servicio de Comentarios","sidebar_label":"Comentarios"},"sidebar":"tutorialSidebar","previous":{"title":"User Routes","permalink":"/producttrack/docs/backend/routes/user.routes"},"next":{"title":"Email","permalink":"/producttrack/docs/backend/services/email-service"}}');var i=n(4848),c=n(8453);const s={id:"comentarios-service",title:"Servicio de Comentarios",sidebar_label:"Comentarios"},t=void 0,a={},d=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\ud83d\udccc Prop\xf3sito",id:"-prop\xf3sito",level:2},{value:"\ud83e\udde9 Importaciones clave",id:"-importaciones-clave",level:2},{value:"\ud83e\uddf0 Funciones exportadas",id:"-funciones-exportadas",level:2},{value:"\ud83d\udd39 <code>obtenerComentariosPorProducto(productoId: number): Promise&lt;ComentarioDTO[]&gt;</code>",id:"-obtenercomentariosporproductoproductoid-number-promisecomentariodto",level:3},{value:"\ud83d\udd39 <code>crearComentario(idUsuario: number, idProducto: number, comentario: string): Promise&lt;ComentarioDTO&gt;</code>",id:"-crearcomentarioidusuario-number-idproducto-number-comentario-string-promisecomentariodto",level:3},{value:"\ud83d\udd39 <code>actualizarComentario(idComentario: number, nuevoTexto: string): Promise&lt;ComentarioDTO&gt;</code>",id:"-actualizarcomentarioidcomentario-number-nuevotexto-string-promisecomentariodto",level:3},{value:"\ud83d\udd39 <code>eliminarComentario(idComentario: number): Promise&lt;{ mensaje: string }&gt;</code>",id:"-eliminarcomentarioidcomentario-number-promise-mensaje-string-",level:3},{value:"\ud83e\udde0 Detalles t\xe9cnicos",id:"-detalles-t\xe9cnicos",level:2},{value:"\ud83e\uddfe Ejemplo de <code>ComentarioDTO</code>",id:"-ejemplo-de-comentariodto",level:2},{value:"\u2705 Resumen",id:"-resumen",level:2}];function l(e){const r={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.p,{children:"Este archivo define las funciones del servicio para manejar comentarios en productos. Se conecta a la base de datos mediante Prisma y gestiona operaciones CRUD (crear, leer, actualizar, eliminar), adem\xe1s de invocar notificaciones al crear un nuevo comentario."}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"src/services/comentarios.service.ts"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"-prop\xf3sito",children:"\ud83d\udccc Prop\xf3sito"}),"\n",(0,i.jsx)(r.p,{children:"Gestionar la l\xf3gica de negocio relacionada con los comentarios de productos:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Obtener comentarios por producto."}),"\n",(0,i.jsx)(r.li,{children:"Crear un nuevo comentario."}),"\n",(0,i.jsx)(r.li,{children:"Actualizar un comentario existente."}),"\n",(0,i.jsx)(r.li,{children:"Eliminar un comentario."}),"\n",(0,i.jsx)(r.li,{children:"Notificar cuando se crea un nuevo comentario."}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"-importaciones-clave",children:"\ud83e\udde9 Importaciones clave"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-ts",children:"import prisma from '../utils/prismaClient';\r\nimport { ComentarioDTO } from '../models/ComentarioDTO';\r\nimport { notificarComentarioProducto } from '../services/notificaciones/comentarioProducto.service';\n"})}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"M\xf3dulo"}),(0,i.jsx)(r.th,{children:"Prop\xf3sito"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"prismaClient"})}),(0,i.jsx)(r.td,{children:"Cliente de Prisma para interactuar con la base de datos."})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"ComentarioDTO"})}),(0,i.jsx)(r.td,{children:"Interfaz para representar la forma estandarizada de un comentario."})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"notificarComentarioProducto"})}),(0,i.jsx)(r.td,{children:"Servicio de notificaci\xf3n que alerta sobre nuevos comentarios."})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"-funciones-exportadas",children:"\ud83e\uddf0 Funciones exportadas"}),"\n",(0,i.jsxs)(r.h3,{id:"-obtenercomentariosporproductoproductoid-number-promisecomentariodto",children:["\ud83d\udd39 ",(0,i.jsx)(r.code,{children:"obtenerComentariosPorProducto(productoId: number): Promise<ComentarioDTO[]>"})]}),"\n",(0,i.jsx)(r.p,{children:"Obtiene todos los comentarios asociados a un producto espec\xedfico."}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Par\xe1metros:"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"productoId"})," (",(0,i.jsx)(r.code,{children:"number"}),"): ID del producto."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Retorna:"}),"\r\nUna lista de objetos ",(0,i.jsx)(r.code,{children:"ComentarioDTO"}),", ordenados por fecha de comentario en orden descendente."]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"-crearcomentarioidusuario-number-idproducto-number-comentario-string-promisecomentariodto",children:["\ud83d\udd39 ",(0,i.jsx)(r.code,{children:"crearComentario(idUsuario: number, idProducto: number, comentario: string): Promise<ComentarioDTO>"})]}),"\n",(0,i.jsx)(r.p,{children:"Crea un nuevo comentario para un producto y notifica a trav\xe9s del sistema de notificaciones."}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Par\xe1metros:"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"idUsuario"})," (",(0,i.jsx)(r.code,{children:"number"}),"): ID del usuario que comenta."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"idProducto"})," (",(0,i.jsx)(r.code,{children:"number"}),"): ID del producto comentado."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"comentario"})," (",(0,i.jsx)(r.code,{children:"string"}),"): Texto del comentario."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Retorna:"}),"\r\nEl comentario reci\xe9n creado en formato ",(0,i.jsx)(r.code,{children:"ComentarioDTO"}),"."]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Notas:"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["El campo ",(0,i.jsx)(r.code,{children:"estado"})," se establece inicialmente como ",(0,i.jsx)(r.code,{children:'"pendiente"'}),"."]}),"\n",(0,i.jsxs)(r.li,{children:["Se dispara una notificaci\xf3n al crear el comentario (",(0,i.jsx)(r.code,{children:"notificarComentarioProducto"}),")."]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"-actualizarcomentarioidcomentario-number-nuevotexto-string-promisecomentariodto",children:["\ud83d\udd39 ",(0,i.jsx)(r.code,{children:"actualizarComentario(idComentario: number, nuevoTexto: string): Promise<ComentarioDTO>"})]}),"\n",(0,i.jsx)(r.p,{children:"Actualiza el contenido de un comentario existente."}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Par\xe1metros:"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"idComentario"})," (",(0,i.jsx)(r.code,{children:"number"}),"): ID del comentario a actualizar."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"nuevoTexto"})," (",(0,i.jsx)(r.code,{children:"string"}),"): Nuevo contenido del comentario."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Retorna:"}),"\r\nEl comentario actualizado en formato ",(0,i.jsx)(r.code,{children:"ComentarioDTO"}),"."]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h3,{id:"-eliminarcomentarioidcomentario-number-promise-mensaje-string-",children:["\ud83d\udd39 ",(0,i.jsx)(r.code,{children:"eliminarComentario(idComentario: number): Promise<{ mensaje: string }>"})]}),"\n",(0,i.jsx)(r.p,{children:"Elimina un comentario de la base de datos por su ID."}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Par\xe1metros:"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"idComentario"})," (",(0,i.jsx)(r.code,{children:"number"}),"): ID del comentario a eliminar."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Retorna:"}),"\r\nUn objeto con un mensaje de confirmaci\xf3n:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{ "mensaje": "Comentario eliminado" }\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"-detalles-t\xe9cnicos",children:"\ud83e\udde0 Detalles t\xe9cnicos"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Prisma es utilizado como ORM para realizar las operaciones sobre la tabla ",(0,i.jsx)(r.code,{children:"comentarios"}),"."]}),"\n",(0,i.jsxs)(r.li,{children:["La conversi\xf3n de los resultados a ",(0,i.jsx)(r.code,{children:"ComentarioDTO"})," se realiza mediante la funci\xf3n ",(0,i.jsx)(r.code,{children:"mapComentarioToDTO"})," para mantener un formato coherente y desacoplado del modelo de base de datos."]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h2,{id:"-ejemplo-de-comentariodto",children:["\ud83e\uddfe Ejemplo de ",(0,i.jsx)(r.code,{children:"ComentarioDTO"})]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-ts",children:"export interface ComentarioDTO {\r\n  idComentario: number;\r\n  idUsuario: number;\r\n  idProducto: number;\r\n  comentario: string;\r\n  fechaComentario: Date;\r\n  estado: string;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"-resumen",children:"\u2705 Resumen"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Funci\xf3n"}),(0,i.jsx)(r.th,{children:"Prop\xf3sito"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"obtenerComentariosPorProducto"})}),(0,i.jsx)(r.td,{children:"Obtener comentarios de un producto."})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"crearComentario"})}),(0,i.jsx)(r.td,{children:"Crear y notificar un nuevo comentario."})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"actualizarComentario"})}),(0,i.jsx)(r.td,{children:"Editar el contenido de un comentario."})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"eliminarComentario"})}),(0,i.jsx)(r.td,{children:"Eliminar un comentario existente."})]})]})]}),"\n",(0,i.jsx)(r.hr,{})]})}function m(e={}){const{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>t});var o=n(6540);const i={},c=o.createContext(i);function s(e){const r=o.useContext(c);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(c.Provider,{value:r},e.children)}}}]);