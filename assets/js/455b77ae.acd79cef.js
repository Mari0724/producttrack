"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[363],{6283:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"backend/services/preferencias-service","title":"Servicio de Preferencias de Notificaciones","description":"Este m\xf3dulo gestiona la creaci\xf3n y actualizaci\xf3n de las preferencias de notificaciones de un usuario en el sistema.","source":"@site/docs/backend/services/preferencias.services.md","sourceDirName":"backend/services","slug":"/backend/services/preferencias-service","permalink":"/producttrack/docs/backend/services/preferencias-service","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/backend/services/preferencias.services.md","tags":[],"version":"current","frontMatter":{"id":"preferencias-service","title":"Servicio de Preferencias de Notificaciones","sidebar_label":"Preferencias"},"sidebar":"tutorialSidebar","previous":{"title":"OpenFoodFacts","permalink":"/producttrack/docs/backend/services/openfoodfacts.service"},"next":{"title":"Productos","permalink":"/producttrack/docs/backend/services/productos-service"}}');var c=n(4848),r=n(8453);const a={id:"preferencias-service",title:"Servicio de Preferencias de Notificaciones",sidebar_label:"Preferencias"},l=void 0,o={},d=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\ud83d\udce6 Dependencias utilizadas",id:"-dependencias-utilizadas",level:2},{value:"\ud83d\udee0 Funciones principales",id:"-funciones-principales",level:2},{value:"<code>actualizarPreferencias(idUsuario: number, data: Partial&lt;Preferencias&gt;)</code>",id:"actualizarpreferenciasidusuario-number-data-partialpreferencias",level:3},{value:"<strong>Par\xe1metros</strong>",id:"par\xe1metros",level:4},{value:"\ud83d\udd04 L\xf3gica de funcionamiento",id:"-l\xf3gica-de-funcionamiento",level:2},{value:"\ud83d\udcc2 Ejemplo de uso",id:"-ejemplo-de-uso",level:2},{value:"\u2699\ufe0f Tablas relacionadas",id:"\ufe0f-tablas-relacionadas",level:2}];function t(e){const i={code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(i.p,{children:["Este m\xf3dulo gestiona la ",(0,c.jsx)(i.strong,{children:"creaci\xf3n y actualizaci\xf3n"})," de las preferencias de notificaciones de un usuario en el sistema."]}),"\n",(0,c.jsx)(i.hr,{}),"\n",(0,c.jsx)(i.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,c.jsx)(i.p,{children:(0,c.jsx)(i.code,{children:"src/services/preferencias.service.ts"})}),"\n",(0,c.jsx)(i.hr,{}),"\n",(0,c.jsx)(i.h2,{id:"-dependencias-utilizadas",children:"\ud83d\udce6 Dependencias utilizadas"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-ts",children:"import prisma from '../utils/prismaClient';\n"})}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.strong,{children:(0,c.jsx)(i.code,{children:"prisma"})})," \u2192 Cliente de base de datos para interactuar con la tabla ",(0,c.jsx)(i.code,{children:"preferenciasNotificaciones"}),"."]}),"\n"]}),"\n",(0,c.jsx)(i.hr,{}),"\n",(0,c.jsx)(i.h2,{id:"-funciones-principales",children:"\ud83d\udee0 Funciones principales"}),"\n",(0,c.jsx)(i.h3,{id:"actualizarpreferenciasidusuario-number-data-partialpreferencias",children:(0,c.jsx)(i.code,{children:"actualizarPreferencias(idUsuario: number, data: Partial<Preferencias>)"})}),"\n",(0,c.jsx)(i.p,{children:"Actualiza o crea las preferencias de notificaciones para un usuario espec\xedfico."}),"\n",(0,c.jsx)(i.h4,{id:"par\xe1metros",children:(0,c.jsx)(i.strong,{children:"Par\xe1metros"})}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsxs)(i.li,{children:["\n",(0,c.jsxs)(i.p,{children:[(0,c.jsx)(i.strong,{children:(0,c.jsx)(i.code,{children:"idUsuario"})})," ",(0,c.jsx)(i.em,{children:"(number)"})," \u2192 ID del usuario al que se le aplicar\xe1n las preferencias."]}),"\n"]}),"\n",(0,c.jsxs)(i.li,{children:["\n",(0,c.jsxs)(i.p,{children:[(0,c.jsx)(i.strong,{children:(0,c.jsx)(i.code,{children:"data"})})," ",(0,c.jsx)(i.em,{children:"(Partial<Preferencias>)"})," \u2192 Objeto con las preferencias a modificar. Puede incluir:"]}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"stockBajo"})," ",(0,c.jsx)(i.em,{children:"(boolean)"})," \u2192 Notificaci\xf3n de stock bajo."]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"productoVencido"})," ",(0,c.jsx)(i.em,{children:"(boolean)"})," \u2192 Notificaci\xf3n de productos vencidos."]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"comentarios"})," ",(0,c.jsx)(i.em,{children:"(boolean)"})," \u2192 Notificaci\xf3n de nuevos comentarios."]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"reposicion"})," ",(0,c.jsx)(i.em,{children:"(boolean)"})," \u2192 Notificaci\xf3n de reposici\xf3n de stock."]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"actualizacion"})," ",(0,c.jsx)(i.em,{children:"(boolean)"})," \u2192 Notificaci\xf3n de actualizaciones generales."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(i.hr,{}),"\n",(0,c.jsx)(i.h2,{id:"-l\xf3gica-de-funcionamiento",children:"\ud83d\udd04 L\xf3gica de funcionamiento"}),"\n",(0,c.jsxs)(i.ol,{children:["\n",(0,c.jsxs)(i.li,{children:["\n",(0,c.jsxs)(i.p,{children:[(0,c.jsx)(i.strong,{children:"Consulta inicial"}),"\r\nSe busca si el usuario ya tiene preferencias registradas:"]}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-ts",children:"const existentes = await prisma.preferenciasNotificaciones.findUnique({\r\n  where: { idUsuario }\r\n});\n"})}),"\n"]}),"\n",(0,c.jsxs)(i.li,{children:["\n",(0,c.jsx)(i.p,{children:(0,c.jsx)(i.strong,{children:"Si existen preferencias previas"})}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsxs)(i.li,{children:["Se actualizan \xfanicamente los campos recibidos en ",(0,c.jsx)(i.code,{children:"data"}),"."]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(i.li,{children:["\n",(0,c.jsx)(i.p,{children:(0,c.jsx)(i.strong,{children:"Si no existen preferencias previas"})}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsxs)(i.li,{children:["Se crea un nuevo registro en ",(0,c.jsx)(i.code,{children:"preferenciasNotificaciones"}),"."]}),"\n",(0,c.jsxs)(i.li,{children:["Los campos no especificados en ",(0,c.jsx)(i.code,{children:"data"})," se inicializan en ",(0,c.jsx)(i.code,{children:"true"})," por defecto."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(i.hr,{}),"\n",(0,c.jsx)(i.h2,{id:"-ejemplo-de-uso",children:"\ud83d\udcc2 Ejemplo de uso"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-ts",children:"await actualizarPreferencias(5, {\r\n  stockBajo: false,\r\n  productoVencido: true\r\n});\n"})}),"\n",(0,c.jsxs)(i.p,{children:["\ud83d\udccc Este ejemplo actualiza las preferencias del usuario con ID ",(0,c.jsx)(i.strong,{children:"5"}),", desactivando las alertas por stock bajo pero manteniendo activas las de productos vencidos."]}),"\n",(0,c.jsx)(i.hr,{}),"\n",(0,c.jsx)(i.h2,{id:"\ufe0f-tablas-relacionadas",children:"\u2699\ufe0f Tablas relacionadas"}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsxs)(i.li,{children:["\n",(0,c.jsx)(i.p,{children:(0,c.jsx)(i.strong,{children:(0,c.jsx)(i.code,{children:"preferenciasNotificaciones"})})}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"idUsuario"})," ",(0,c.jsx)(i.em,{children:"(PK, FK \u2192 usuarios.id)"})]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"stockBajo"})," ",(0,c.jsx)(i.em,{children:"(boolean)"})]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"productoVencido"})," ",(0,c.jsx)(i.em,{children:"(boolean)"})]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"comentarios"})," ",(0,c.jsx)(i.em,{children:"(boolean)"})]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"reposicion"})," ",(0,c.jsx)(i.em,{children:"(boolean)"})]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.code,{children:"actualizacion"})," ",(0,c.jsx)(i.em,{children:"(boolean)"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(i.hr,{})]})}function u(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,c.jsx)(i,{...e,children:(0,c.jsx)(t,{...e})}):t(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>l});var s=n(6540);const c={},r=s.createContext(c);function a(e){const i=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);