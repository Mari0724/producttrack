"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6081],{1060:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>s,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"frontend/api/historial-api","title":"API de Historial de Inventario","description":"Este archivo define una funci\xf3n que interact\xfaa con la API del backend para obtener el historial de cambios en el inventario de un usuario espec\xedfico. Utiliza una instancia de Axios personalizada y transforma los datos para ser utilizados f\xe1cilmente en la interfaz.","source":"@site/docs/frontend/api/historial.md","sourceDirName":"frontend/api","slug":"/frontend/api/historial-api","permalink":"/producttrack/docs/frontend/api/historial-api","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/frontend/api/historial.md","tags":[],"version":"current","frontMatter":{"id":"historial-api","title":"API de Historial de Inventario","sidebar_label":"historial"},"sidebar":"tutorialSidebar","previous":{"title":"comentarios","permalink":"/producttrack/docs/frontend/api/comentarios-api"},"next":{"title":"notificaciones","permalink":"/producttrack/docs/frontend/api/notificaciones-api"}}');var a=n(4848),t=n(8453);const d={id:"historial-api",title:"API de Historial de Inventario",sidebar_label:"historial"},s=void 0,o={},c=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\ud83d\udce6 Dependencias utilizadas",id:"-dependencias-utilizadas",level:2},{value:"\ud83d\udd27 Funci\xf3n principal",id:"-funci\xf3n-principal",level:2},{value:"\ud83d\udd58 <code>getHistorialInventario(idUsuario: number): Promise&lt;InventoryChange[]&gt;</code>",id:"-gethistorialinventarioidusuario-number-promiseinventorychange",level:3},{value:"\ud83d\uddc3\ufe0f Transformaci\xf3n de datos",id:"\ufe0f-transformaci\xf3n-de-datos",level:2},{value:"\ud83d\ude80 Ejemplo de uso",id:"-ejemplo-de-uso",level:2},{value:"\ud83d\udcdd Notas adicionales",id:"-notas-adicionales",level:2}];function l(e){const i={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.p,{children:["Este archivo define una funci\xf3n que interact\xfaa con la API del backend para obtener el ",(0,a.jsx)(i.strong,{children:"historial de cambios en el inventario"})," de un usuario espec\xedfico. Utiliza una instancia de Axios personalizada y transforma los datos para ser utilizados f\xe1cilmente en la interfaz."]}),"\n",(0,a.jsx)(i.hr,{}),"\n",(0,a.jsx)(i.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.code,{children:"src/api/historial.ts"})}),"\n",(0,a.jsx)(i.hr,{}),"\n",(0,a.jsx)(i.h2,{id:"-dependencias-utilizadas",children:"\ud83d\udce6 Dependencias utilizadas"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-ts",children:'import axiosInstance from "../utils/axiosInstance";\r\nimport type { HistorialDTO } from "../types/Historial";\r\nimport type { InventoryChange } from "../types/Inventory";\n'})}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"axiosInstance"}),": Instancia preconfigurada de Axios para realizar las solicitudes HTTP."]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"HistorialDTO"}),": Tipo de dato recibido desde el backend con la estructura original del historial."]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"InventoryChange"}),": Tipo utilizado internamente en el frontend para mostrar los cambios del inventario de forma m\xe1s intuitiva."]}),"\n"]}),"\n",(0,a.jsx)(i.hr,{}),"\n",(0,a.jsx)(i.h2,{id:"-funci\xf3n-principal",children:"\ud83d\udd27 Funci\xf3n principal"}),"\n",(0,a.jsxs)(i.h3,{id:"-gethistorialinventarioidusuario-number-promiseinventorychange",children:["\ud83d\udd58 ",(0,a.jsx)(i.code,{children:"getHistorialInventario(idUsuario: number): Promise<InventoryChange[]>"})]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-ts",children:'export async function getHistorialInventario(idUsuario: number): Promise<InventoryChange[]> {\r\n  const response = await axiosInstance.get(`/historial/usuario/${idUsuario}`);\r\n  \r\n  return response.data.map((h: HistorialDTO) => ({\r\n    id: h.id.toString(),\r\n    productName: h.nombreProducto,\r\n    action:\r\n      h.accion === "agregado"\r\n        ? "added"\r\n        : h.accion === "modificado"\r\n        ? "modified"\r\n        : "deleted",\r\n    previousQuantity: h.cantidad_anterior,\r\n    newQuantity: h.cantidad_nueva,\r\n    previousPrice: h.precio_anterior,\r\n    newPrice: h.precio_nuevo,\r\n    changeDate: new Date(h.fechaCambio),\r\n  }));\r\n}\n'})}),"\n",(0,a.jsxs)(i.p,{children:["Esta funci\xf3n realiza una solicitud ",(0,a.jsx)(i.code,{children:"GET"})," al endpoint ",(0,a.jsx)(i.code,{children:"/historial/usuario/{idUsuario}"})," para obtener el historial del usuario. Luego transforma cada entrada del historial (",(0,a.jsx)(i.code,{children:"HistorialDTO"}),") a una estructura m\xe1s usable (",(0,a.jsx)(i.code,{children:"InventoryChange"}),")."]}),"\n",(0,a.jsx)(i.hr,{}),"\n",(0,a.jsx)(i.h2,{id:"\ufe0f-transformaci\xf3n-de-datos",children:"\ud83d\uddc3\ufe0f Transformaci\xf3n de datos"}),"\n",(0,a.jsxs)(i.table,{children:[(0,a.jsx)(i.thead,{children:(0,a.jsxs)(i.tr,{children:[(0,a.jsxs)(i.th,{children:["Campo original (",(0,a.jsx)(i.code,{children:"HistorialDTO"}),")"]}),(0,a.jsxs)(i.th,{children:["Campo transformado (",(0,a.jsx)(i.code,{children:"InventoryChange"}),")"]}),(0,a.jsx)(i.th,{children:"Descripci\xf3n"})]})}),(0,a.jsxs)(i.tbody,{children:[(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"id"})}),(0,a.jsxs)(i.td,{children:[(0,a.jsx)(i.code,{children:"id"})," (como string)"]}),(0,a.jsx)(i.td,{children:"Identificador del cambio"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"nombreProducto"})}),(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"productName"})}),(0,a.jsx)(i.td,{children:"Nombre del producto afectado"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"accion"})}),(0,a.jsxs)(i.td,{children:[(0,a.jsx)(i.code,{children:"action"})," (",(0,a.jsx)(i.code,{children:"added"})," / ",(0,a.jsx)(i.code,{children:"modified"})," / ",(0,a.jsx)(i.code,{children:"deleted"}),")"]}),(0,a.jsx)(i.td,{children:"Tipo de acci\xf3n en formato legible"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"cantidad_anterior"})}),(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"previousQuantity"})}),(0,a.jsx)(i.td,{children:"Cantidad antes del cambio"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"cantidad_nueva"})}),(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"newQuantity"})}),(0,a.jsx)(i.td,{children:"Cantidad despu\xe9s del cambio"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"precio_anterior"})}),(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"previousPrice"})}),(0,a.jsx)(i.td,{children:"Precio anterior"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"precio_nuevo"})}),(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"newPrice"})}),(0,a.jsx)(i.td,{children:"Precio actualizado"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:(0,a.jsx)(i.code,{children:"fechaCambio"})}),(0,a.jsxs)(i.td,{children:[(0,a.jsx)(i.code,{children:"changeDate"})," (Date)"]}),(0,a.jsx)(i.td,{children:"Fecha en la que ocurri\xf3 el cambio"})]})]})]}),"\n",(0,a.jsxs)(i.blockquote,{children:["\n",(0,a.jsxs)(i.p,{children:["\u26a0\ufe0f La transformaci\xf3n de ",(0,a.jsx)(i.code,{children:"accion"})," permite utilizar t\xe9rminos en ingl\xe9s directamente en la interfaz de usuario para estandarizar los textos (",(0,a.jsx)(i.code,{children:"added"}),", ",(0,a.jsx)(i.code,{children:"modified"}),", ",(0,a.jsx)(i.code,{children:"deleted"}),")."]}),"\n"]}),"\n",(0,a.jsx)(i.hr,{}),"\n",(0,a.jsx)(i.h2,{id:"-ejemplo-de-uso",children:"\ud83d\ude80 Ejemplo de uso"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-ts",children:'import { getHistorialInventario } from "../api/historial";\r\n\r\nconst historial = await getHistorialInventario(5);\r\n\r\nconsole.log(historial);\r\n/*\r\n[\r\n  {\r\n    id: "12",\r\n    productName: "Papel higi\xe9nico",\r\n    action: "modified",\r\n    previousQuantity: 20,\r\n    newQuantity: 15,\r\n    previousPrice: 3.5,\r\n    newPrice: 3.8,\r\n    changeDate: 2025-08-05T21:00:00.000Z\r\n  },\r\n  ...\r\n]\r\n*/\n'})}),"\n",(0,a.jsx)(i.hr,{}),"\n",(0,a.jsx)(i.h2,{id:"-notas-adicionales",children:"\ud83d\udcdd Notas adicionales"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"Este archivo transforma la estructura cruda del backend en una forma m\xe1s legible para el frontend."}),"\n",(0,a.jsxs)(i.li,{children:["Utiliza ",(0,a.jsx)(i.code,{children:"axiosInstance"}),", lo que permite centralizar headers, baseURL y autenticaci\xf3n en un solo lugar."]}),"\n",(0,a.jsx)(i.li,{children:"Puede ser f\xe1cilmente adaptado si se agregan m\xe1s campos al historial en el futuro."}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>d,x:()=>s});var r=n(6540);const a={},t=r.createContext(a);function d(e){const i=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function s(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),r.createElement(t.Provider,{value:i},e.children)}}}]);