"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8045],{5288:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>c,contentTitle:()=>d,default:()=>t,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"backend/controllers/equipo.controller","title":"EquipoController","description":"Este controlador maneja las operaciones relacionadas con la gesti\xf3n de usuarios tipo \\"equipo\\" en el sistema. Permite crear, actualizar, filtrar, eliminar (l\xf3gicamente) y listar miembros del equipo, con base en el rol y tipo de usuario autenticado.","source":"@site/docs/backend/controllers/equipo.controller.md","sourceDirName":"backend/controllers","slug":"/backend/controllers/equipo.controller","permalink":"/producttrack/docs/backend/controllers/equipo.controller","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/backend/controllers/equipo.controller.md","tags":[],"version":"current","frontMatter":{"id":"equipo.controller","title":"EquipoController","sidebar_label":"Equipo"},"sidebar":"tutorialSidebar","previous":{"title":"Comentarios","permalink":"/producttrack/docs/backend/controllers/comentarios.controller"},"next":{"title":"Historial","permalink":"/producttrack/docs/backend/controllers/historial.controller"}}');var n=s(4848),l=s(8453);const o={id:"equipo.controller",title:"EquipoController",sidebar_label:"Equipo"},d="EquipoController",c={},a=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\ud83d\udd10 Seguridad",id:"-seguridad",level:2},{value:"\ud83d\udccc Endpoints",id:"-endpoints",level:2},{value:"\ud83d\udce4 Crear nuevo equipo",id:"-crear-nuevo-equipo",level:3},{value:"Requiere",id:"requiere",level:4},{value:"Respuesta",id:"respuesta",level:4},{value:"\ud83d\udce5 Obtener todos los equipos",id:"-obtener-todos-los-equipos",level:3},{value:"Requiere",id:"requiere-1",level:4},{value:"Respuesta",id:"respuesta-1",level:4},{value:"\ud83d\udd0e Filtrar equipos",id:"-filtrar-equipos",level:3},{value:"Par\xe1metros (<code>query</code>)",id:"par\xe1metros-query",level:4},{value:"Requiere",id:"requiere-2",level:4},{value:"Respuesta",id:"respuesta-2",level:4},{value:"\ud83d\udcc4 Obtener equipo por ID",id:"-obtener-equipo-por-id",level:3},{value:"Requiere",id:"requiere-3",level:4},{value:"Respuesta",id:"respuesta-3",level:4},{value:"\u270f\ufe0f Actualizar equipo",id:"\ufe0f-actualizar-equipo",level:3},{value:"Requiere",id:"requiere-4",level:4},{value:"Respuesta",id:"respuesta-4",level:4},{value:"\ud83d\uddd1\ufe0f Eliminaci\xf3n l\xf3gica de equipo",id:"\ufe0f-eliminaci\xf3n-l\xf3gica-de-equipo",level:3},{value:"Requiere",id:"requiere-5",level:4},{value:"Respuesta",id:"respuesta-5",level:4},{value:"\ud83e\udde8 Eliminar todos los equipos de una empresa",id:"-eliminar-todos-los-equipos-de-una-empresa",level:3},{value:"Requiere",id:"requiere-6",level:4},{value:"Respuesta",id:"respuesta-6",level:4},{value:"\ud83d\udee0\ufe0f Notas t\xe9cnicas",id:"\ufe0f-notas-t\xe9cnicas",level:2}];function u(e){const i={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"equipocontroller",children:"EquipoController"})}),"\n",(0,n.jsx)(i.p,{children:'Este controlador maneja las operaciones relacionadas con la gesti\xf3n de usuarios tipo "equipo" en el sistema. Permite crear, actualizar, filtrar, eliminar (l\xf3gicamente) y listar miembros del equipo, con base en el rol y tipo de usuario autenticado.'}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.code,{children:"src/controllers/equipo.controller.ts"})}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"-seguridad",children:"\ud83d\udd10 Seguridad"}),"\n",(0,n.jsxs)(i.p,{children:["Todas las rutas est\xe1n protegidas por JWT (",(0,n.jsx)(i.code,{children:'@Security("jwt")'}),").",(0,n.jsx)(i.br,{}),"\n","Solo los usuarios con ",(0,n.jsx)(i.strong,{children:"tipoUsuario = EMPRESARIAL"})," o ",(0,n.jsx)(i.strong,{children:"rol = ADMIN"})," pueden realizar acciones sobre los miembros del equipo."]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"-endpoints",children:"\ud83d\udccc Endpoints"}),"\n",(0,n.jsx)(i.h3,{id:"-crear-nuevo-equipo",children:"\ud83d\udce4 Crear nuevo equipo"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"POST"})," ",(0,n.jsx)(i.code,{children:"/equipo"})]}),"\n",(0,n.jsx)(i.p,{children:"Crea un nuevo usuario de tipo equipo para una empresa."}),"\n",(0,n.jsx)(i.h4,{id:"requiere",children:"Requiere"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Token JWT v\xe1lido."}),"\n",(0,n.jsxs)(i.li,{children:["Objeto ",(0,n.jsx)(i.code,{children:"EquipoDTO"})," en el cuerpo de la solicitud."]}),"\n",(0,n.jsxs)(i.li,{children:["Si el usuario es ",(0,n.jsx)(i.code,{children:"ADMIN"}),", debe incluir ",(0,n.jsx)(i.code,{children:"empresaId"})," expl\xedcitamente."]}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"respuesta",children:"Respuesta"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"201 Created"})," con el equipo creado."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"400 Bad Request"})," si falta ",(0,n.jsx)(i.code,{children:"empresaId"})," siendo ",(0,n.jsx)(i.code,{children:"ADMIN"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"403 Forbidden"})," si no tiene permisos."]}),"\n"]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h3,{id:"-obtener-todos-los-equipos",children:"\ud83d\udce5 Obtener todos los equipos"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"GET"})," ",(0,n.jsx)(i.code,{children:"/equipo"})]}),"\n",(0,n.jsxs)(i.p,{children:["Lista todos los equipos.",(0,n.jsx)(i.br,{}),"\n","Si el usuario es EMPRESARIAL, se limita a su propia empresa."]}),"\n",(0,n.jsx)(i.h4,{id:"requiere-1",children:"Requiere"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Token JWT v\xe1lido."}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"respuesta-1",children:"Respuesta"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Lista de equipos seg\xfan el contexto."}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"403 Forbidden"})," si no tiene permisos."]}),"\n"]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h3,{id:"-filtrar-equipos",children:"\ud83d\udd0e Filtrar equipos"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"GET"})," ",(0,n.jsx)(i.code,{children:"/equipo/filtrar"})]}),"\n",(0,n.jsx)(i.p,{children:"Permite filtrar equipos por m\xfaltiples par\xe1metros."}),"\n",(0,n.jsxs)(i.h4,{id:"par\xe1metros-query",children:["Par\xe1metros (",(0,n.jsx)(i.code,{children:"query"}),")"]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"nombreCompleto"})," (string) \u2013 Filtrar por nombre."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"correo"})," (string) \u2013 Filtrar por correo."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"rolEquipo"})," (",(0,n.jsx)(i.code,{children:"LECTOR"})," | ",(0,n.jsx)(i.code,{children:"COMENTARISTA"})," | ",(0,n.jsx)(i.code,{children:"EDITOR"}),") \u2013 Rol dentro del equipo."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"estado"})," (",(0,n.jsx)(i.code,{children:"activo"})," | ",(0,n.jsx)(i.code,{children:"inactivo"}),") \u2013 Estado del equipo."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"perfilCompleto"})," (",(0,n.jsx)(i.code,{children:"true"})," | ",(0,n.jsx)(i.code,{children:"false"}),") \u2013 Si el equipo complet\xf3 el perfil."]}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"requiere-2",children:"Requiere"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Token JWT v\xe1lido."}),"\n",(0,n.jsx)(i.li,{children:"Si es EMPRESARIAL, solo ver\xe1 equipos de su empresa."}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"respuesta-2",children:"Respuesta"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Lista de equipos filtrados."}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"403 Forbidden"})," si no tiene permisos."]}),"\n"]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h3,{id:"-obtener-equipo-por-id",children:"\ud83d\udcc4 Obtener equipo por ID"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"GET"})," ",(0,n.jsx)(i.code,{children:"/equipo/{id}"})]}),"\n",(0,n.jsx)(i.p,{children:"Obtiene los datos de un miembro del equipo por su ID."}),"\n",(0,n.jsx)(i.h4,{id:"requiere-3",children:"Requiere"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Token JWT v\xe1lido."}),"\n",(0,n.jsx)(i.li,{children:"Si el usuario es EMPRESARIAL, solo podr\xe1 acceder a miembros de su empresa."}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"respuesta-3",children:"Respuesta"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Objeto del equipo."}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"403 Forbidden"})," si intenta acceder a otro equipo fuera de su empresa."]}),"\n"]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h3,{id:"\ufe0f-actualizar-equipo",children:"\u270f\ufe0f Actualizar equipo"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"PUT"})," ",(0,n.jsx)(i.code,{children:"/equipo/{id}"})]}),"\n",(0,n.jsx)(i.p,{children:"Actualiza campos espec\xedficos de un usuario equipo."}),"\n",(0,n.jsx)(i.h4,{id:"requiere-4",children:"Requiere"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Token JWT v\xe1lido."}),"\n",(0,n.jsxs)(i.li,{children:["Cuerpo con los campos a modificar (",(0,n.jsx)(i.code,{children:"Partial<EquipoDTO>"}),")."]}),"\n",(0,n.jsx)(i.li,{children:"EMPRESARIAL solo puede modificar equipos de su empresa."}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"respuesta-4",children:"Respuesta"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Equipo actualizado."}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"403 Forbidden"})," si no tiene permisos."]}),"\n"]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h3,{id:"\ufe0f-eliminaci\xf3n-l\xf3gica-de-equipo",children:"\ud83d\uddd1\ufe0f Eliminaci\xf3n l\xf3gica de equipo"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"DELETE"})," ",(0,n.jsx)(i.code,{children:"/equipo/eliminar-logico/{id}"})]}),"\n",(0,n.jsxs)(i.p,{children:["Realiza una ",(0,n.jsx)(i.strong,{children:"eliminaci\xf3n l\xf3gica"})," (no f\xedsica) de un miembro del equipo."]}),"\n",(0,n.jsx)(i.h4,{id:"requiere-5",children:"Requiere"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Token JWT v\xe1lido."}),"\n",(0,n.jsx)(i.li,{children:"El equipo debe pertenecer a la empresa del usuario si es EMPRESARIAL."}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"respuesta-5",children:"Respuesta"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Confirmaci\xf3n de eliminaci\xf3n."}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"403 Forbidden"})," si no tiene permisos o el equipo no pertenece a su empresa."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"404 Not Found"})," si el equipo no existe."]}),"\n"]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h3,{id:"-eliminar-todos-los-equipos-de-una-empresa",children:"\ud83e\udde8 Eliminar todos los equipos de una empresa"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"DELETE"})," ",(0,n.jsx)(i.code,{children:"/equipo/todos/{empresaId}"})]}),"\n",(0,n.jsx)(i.p,{children:"Elimina todos los usuarios de equipo asociados a una empresa."}),"\n",(0,n.jsx)(i.h4,{id:"requiere-6",children:"Requiere"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Token JWT v\xe1lido."}),"\n",(0,n.jsxs)(i.li,{children:["Solo ",(0,n.jsx)(i.code,{children:"ADMIN"})," o EMPRESARIAL ",(0,n.jsx)(i.strong,{children:"de la misma empresa"})," pueden ejecutar esta acci\xf3n."]}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"respuesta-6",children:"Respuesta"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Confirmaci\xf3n de eliminaci\xf3n masiva."}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"403 Forbidden"})," si se intenta eliminar los equipos de otra empresa."]}),"\n"]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"\ufe0f-notas-t\xe9cnicas",children:"\ud83d\udee0\ufe0f Notas t\xe9cnicas"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Toda la l\xf3gica est\xe1 contenida en el ",(0,n.jsx)(i.code,{children:"EquipoService"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Se aplica validaci\xf3n de acceso seg\xfan:","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:'req.user.tipoUsuario === "EMPRESARIAL"'})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:'req.user.rol === "ADMIN"'})}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["Si el usuario es EMPRESARIAL, se restringen acciones a su propio ",(0,n.jsx)(i.code,{children:"empresaId"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Los campos ",(0,n.jsx)(i.code,{children:"estado"})," y ",(0,n.jsx)(i.code,{children:"perfilCompleto"})," pueden usarse como filtros adicionales en los endpoints de consulta."]}),"\n"]})]})}function t(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},8453:(e,i,s)=>{s.d(i,{R:()=>o,x:()=>d});var r=s(6540);const n={},l=r.createContext(n);function o(e){const i=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),r.createElement(l.Provider,{value:i},e.children)}}}]);