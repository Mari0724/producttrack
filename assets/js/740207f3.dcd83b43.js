"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5258],{6882:(e,d,s)=>{s.r(d),s.d(d,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"backend/models/UserModel","title":"Validaciones de User","description":"Define el esquema de validaci\xf3n para el modelo de usuario (userSchema) utilizando Zod, con m\xfaltiples reglas que garantizan integridad, formato correcto y l\xf3gica condicional seg\xfan el tipo y rol del usuario.","source":"@site/docs/backend/models/UserModel.md","sourceDirName":"backend/models","slug":"/backend/models/UserModel","permalink":"/producttrack/docs/backend/models/UserModel","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/backend/models/UserModel.md","tags":[],"version":"current","frontMatter":{"id":"UserModel","title":"Validaciones de User","sidebar_label":"User Model"},"sidebar":"tutorialSidebar","previous":{"title":"User DTO","permalink":"/producttrack/docs/backend/models/UserDTO"},"next":{"title":"OCR","permalink":"/producttrack/docs/backend/routes/ocr-routes"}}');var i=s(4848),n=s(8453);const c={id:"UserModel",title:"Validaciones de User",sidebar_label:"User Model"},l="UserModel",o={},t=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\ud83e\udde9 Esquema base (<code>userSchema</code>)",id:"-esquema-base-userschema",level:2},{value:"\u2705 Validaciones adicionales (<code>.refine()</code>)",id:"-validaciones-adicionales-refine",level:2},{value:"\ud83e\uddea Tipo inferido",id:"-tipo-inferido",level:2}];function a(e){const d={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.header,{children:(0,i.jsx)(d.h1,{id:"usermodel",children:"UserModel"})}),"\n",(0,i.jsxs)(d.p,{children:["Define el ",(0,i.jsx)(d.strong,{children:"esquema de validaci\xf3n"})," para el modelo de usuario (",(0,i.jsx)(d.code,{children:"userSchema"}),") utilizando ",(0,i.jsx)(d.code,{children:"Zod"}),", con m\xfaltiples reglas que garantizan integridad, formato correcto y l\xf3gica condicional seg\xfan el tipo y rol del usuario."]}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsx)(d.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.code,{children:"src/models/EquipoDTO.ts"})}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsxs)(d.h2,{id:"-esquema-base-userschema",children:["\ud83e\udde9 Esquema base (",(0,i.jsx)(d.code,{children:"userSchema"}),")"]}),"\n",(0,i.jsxs)(d.table,{children:[(0,i.jsx)(d.thead,{children:(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.th,{children:"Campo"}),(0,i.jsx)(d.th,{children:"Tipo/Zod"}),(0,i.jsx)(d.th,{children:"Obligatorio"}),(0,i.jsx)(d.th,{children:"Validaciones y Reglas"})]})}),(0,i.jsxs)(d.tbody,{children:[(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"username"})}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"string()"})}),(0,i.jsx)(d.td,{children:"\u2705 S\xed"}),(0,i.jsx)(d.td,{children:"M\xednimo 3 caracteres, sin espacios extremos."})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"correo"})}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"string().email()"})}),(0,i.jsx)(d.td,{children:"\u2705 S\xed"}),(0,i.jsx)(d.td,{children:"Debe ser un correo v\xe1lido."})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"password"})}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"string()"})}),(0,i.jsx)(d.td,{children:"\u2705 S\xed"}),(0,i.jsx)(d.td,{children:"M\xednimo 8 caracteres, debe incluir: una may\xfascula, una min\xfascula, un n\xfamero y un car\xe1cter especial."})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"nombreCompleto"})}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"string()"})}),(0,i.jsx)(d.td,{children:"\u2705 S\xed"}),(0,i.jsx)(d.td,{children:"M\xednimo 3 caracteres."})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"telefono"})}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"string().regex()"})}),(0,i.jsx)(d.td,{children:"\u2705 S\xed"}),(0,i.jsx)(d.td,{children:"Formato internacional y nacional aceptado."})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"direccion"})}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"string()"})}),(0,i.jsx)(d.td,{children:"\u2705 S\xed"}),(0,i.jsx)(d.td,{children:"M\xednimo 5 caracteres."})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"fotoPerfil"})}),(0,i.jsxs)(d.td,{children:[(0,i.jsx)(d.code,{children:"string().url()"})," ",(0,i.jsx)(d.em,{children:"(opcional)"})]}),(0,i.jsx)(d.td,{children:"\u274c No"}),(0,i.jsx)(d.td,{children:"Debe ser una URL v\xe1lida."})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"nombreEmpresa"})}),(0,i.jsxs)(d.td,{children:[(0,i.jsx)(d.code,{children:"string()"})," ",(0,i.jsx)(d.em,{children:"(opcional)"})]}),(0,i.jsx)(d.td,{children:"\u274c Condicional"}),(0,i.jsxs)(d.td,{children:["Requerido si ",(0,i.jsx)(d.code,{children:"tipoUsuario"})," es ",(0,i.jsx)(d.code,{children:'"EMPRESARIAL"'}),"."]})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"nit"})}),(0,i.jsxs)(d.td,{children:[(0,i.jsx)(d.code,{children:"string().regex()"})," ",(0,i.jsx)(d.em,{children:"(opcional)"})]}),(0,i.jsx)(d.td,{children:"\u274c Condicional"}),(0,i.jsxs)(d.td,{children:["Entre 9 y 15 d\xedgitos. Obligatorio para tipo ",(0,i.jsx)(d.code,{children:'"EMPRESARIAL"'}),"."]})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"estado"})}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:'enum(["activo", "inactivo"])'})}),(0,i.jsx)(d.td,{children:"\u274c No"}),(0,i.jsxs)(d.td,{children:["Por defecto ",(0,i.jsx)(d.code,{children:'"activo"'}),"."]})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"rol"})}),(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:'enum(["USUARIO", "EQUIPO", "ADMIN", "DESARROLLADOR"])'})}),(0,i.jsx)(d.td,{children:"\u2705 S\xed"}),(0,i.jsx)(d.td,{children:"Define el tipo de rol principal del usuario."})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"rolEquipo"})}),(0,i.jsxs)(d.td,{children:[(0,i.jsx)(d.code,{children:'enum(["LECTOR", "COMENTARISTA", "EDITOR"])'})," ",(0,i.jsx)(d.em,{children:"(opcional)"})]}),(0,i.jsx)(d.td,{children:"\u274c No"}),(0,i.jsxs)(d.td,{children:["Aplica si ",(0,i.jsx)(d.code,{children:"rol"})," es ",(0,i.jsx)(d.code,{children:'"EQUIPO"'}),"."]})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"tipoUsuario"})}),(0,i.jsxs)(d.td,{children:[(0,i.jsx)(d.code,{children:'enum(["INDIVIDUAL", "EMPRESARIAL"])'})," ",(0,i.jsx)(d.em,{children:"(opcional)"})]}),(0,i.jsx)(d.td,{children:"\u274c Condicional"}),(0,i.jsxs)(d.td,{children:["Requerido si ",(0,i.jsx)(d.code,{children:"rol"})," es ",(0,i.jsx)(d.code,{children:'"USUARIO"'}),"."]})]}),(0,i.jsxs)(d.tr,{children:[(0,i.jsx)(d.td,{children:(0,i.jsx)(d.code,{children:"empresaId"})}),(0,i.jsxs)(d.td,{children:[(0,i.jsx)(d.code,{children:"number().int().positive()"})," ",(0,i.jsx)(d.em,{children:"(opcional)"})]}),(0,i.jsx)(d.td,{children:"\u274c Condicional"}),(0,i.jsxs)(d.td,{children:["Requerido si ",(0,i.jsx)(d.code,{children:"rol"})," es ",(0,i.jsx)(d.code,{children:'"EQUIPO"'}),"."]})]})]})]}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsxs)(d.h2,{id:"-validaciones-adicionales-refine",children:["\u2705 Validaciones adicionales (",(0,i.jsx)(d.code,{children:".refine()"}),")"]}),"\n",(0,i.jsxs)(d.ol,{children:["\n",(0,i.jsxs)(d.li,{children:["\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.strong,{children:"Tipo de usuario obligatorio si el rol es USUARIO"})}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsxs)(d.li,{children:["\ud83d\udd12 Si ",(0,i.jsx)(d.code,{children:"rol"})," es ",(0,i.jsx)(d.code,{children:'"USUARIO"'}),", entonces ",(0,i.jsx)(d.code,{children:"tipoUsuario"})," no puede faltar."]}),"\n",(0,i.jsxs)(d.li,{children:["\ud83e\udde0 Mensaje de error: ",(0,i.jsx)(d.em,{children:'"El tipo de usuario es obligatorio si el rol es USUARIO."'})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(d.li,{children:["\n",(0,i.jsx)(d.p,{children:(0,i.jsx)(d.strong,{children:"Nombre de empresa y NIT requeridos para tipo EMPRESARIAL"})}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsxs)(d.li,{children:["\ud83d\udd12 Si ",(0,i.jsx)(d.code,{children:"tipoUsuario"})," es ",(0,i.jsx)(d.code,{children:'"EMPRESARIAL"'}),", debe incluir ",(0,i.jsx)(d.code,{children:"nombreEmpresa"})," y ",(0,i.jsx)(d.code,{children:"nit"}),"."]}),"\n",(0,i.jsxs)(d.li,{children:["\ud83e\udde0 Mensaje de error: ",(0,i.jsx)(d.em,{children:'"El nombre de la empresa y el NIT son obligatorios para los usuarios empresariales."'})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(d.li,{children:["\n",(0,i.jsx)(d.p,{children:(0,i.jsxs)(d.strong,{children:[(0,i.jsx)(d.code,{children:"empresaId"})," obligatorio si el rol es EQUIPO"]})}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsxs)(d.li,{children:["\ud83d\udd12 Si ",(0,i.jsx)(d.code,{children:"rol"})," es ",(0,i.jsx)(d.code,{children:'"EQUIPO"'}),", entonces ",(0,i.jsx)(d.code,{children:"empresaId"})," debe existir y ser un n\xfamero positivo."]}),"\n",(0,i.jsxs)(d.li,{children:["\ud83e\udde0 Mensaje de error: ",(0,i.jsx)(d.em,{children:"\"El campo 'empresaId' es obligatorio para usuarios con rol EQUIPO.\""})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(d.hr,{}),"\n",(0,i.jsx)(d.h2,{id:"-tipo-inferido",children:"\ud83e\uddea Tipo inferido"}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-ts",children:"export type ValidatedUser = z.infer<typeof userSchema>;\n"})}),"\n",(0,i.jsx)(d.p,{children:"Esto genera autom\xe1ticamente un tipo TypeScript basado en el esquema validado, \xfatil para tipar objetos ya procesados y seguros."})]})}function h(e={}){const{wrapper:d}={...(0,n.R)(),...e.components};return d?(0,i.jsx)(d,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,d,s)=>{s.d(d,{R:()=>c,x:()=>l});var r=s(6540);const i={},n=r.createContext(i);function c(e){const d=r.useContext(n);return r.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function l(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(n.Provider,{value:d},e.children)}}}]);