"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7960],{4391:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"backend/utils/cronJobs","title":"Cron Jobs","description":"Este m\xf3dulo define y gestiona tareas programadas mediante la librer\xeda node-cron.","source":"@site/docs/backend/utils/cronJobs.md","sourceDirName":"backend/utils","slug":"/backend/utils/cronJobs","permalink":"/producttrack/docs/backend/utils/cronJobs","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/backend/utils/cronJobs.md","tags":[],"version":"current","frontMatter":{"id":"cronJobs","title":"Cron Jobs","sidebar_label":"Cron Jobs"},"sidebar":"tutorialSidebar","previous":{"title":"Cloudinary","permalink":"/producttrack/docs/backend/utils/utils-cloudinary"},"next":{"title":"Autentificaci\xf3n JWT","permalink":"/producttrack/docs/backend/utils/jwt"}}');var r=s(4848),i=s(8453);const c={id:"cronJobs",title:"Cron Jobs",sidebar_label:"Cron Jobs"},a=void 0,t={},d=[{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\ud83d\udcbb C\xf3digo fuente",id:"-c\xf3digo-fuente",level:2},{value:"\ud83d\udd17 Uso",id:"-uso",level:2},{value:"Ejemplo de uso:",id:"ejemplo-de-uso",level:3},{value:"\ud83e\udde9 Relaci\xf3n con otros archivos",id:"-relaci\xf3n-con-otros-archivos",level:2},{value:"\u26a0\ufe0f Consideraciones",id:"\ufe0f-consideraciones",level:2}];function l(e){const n={br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Este m\xf3dulo define y gestiona tareas programadas mediante la librer\xeda ",(0,r.jsx)(n.strong,{children:"node-cron"}),".",(0,r.jsx)(n.br,{}),"\n","En este caso, se configura una tarea que ejecuta la funci\xf3n ",(0,r.jsx)(n.code,{children:"notificarStockBajo"})," todos los d\xedas a las 8:00 AM, permitiendo automatizar el env\xedo de notificaciones cuando el inventario de un producto es bajo."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"src/utils/cronJobs.ts"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-c\xf3digo-fuente",children:"\ud83d\udcbb C\xf3digo fuente"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import cron from 'node-cron';\r\nimport { notificarStockBajo } from '../services/notificaciones/stockBajo.service';\r\n\r\n// Ejecuta todos los d\xedas a las 8:00 AM\r\ncron.schedule('0 8 * * *', async () => {\r\n  await notificarStockBajo();\r\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-uso",children:"\ud83d\udd17 Uso"}),"\n",(0,r.jsxs)(n.p,{children:["Este m\xf3dulo se importa normalmente en el punto de entrada del backend (",(0,r.jsx)(n.code,{children:"src/index.ts"})," o ",(0,r.jsx)(n.code,{children:"src/server.ts"}),") para que las tareas programadas se inicien junto con la aplicaci\xf3n."]}),"\n",(0,r.jsx)(n.h3,{id:"ejemplo-de-uso",children:"Ejemplo de uso:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import './utils/cronJobs';\n"})}),"\n",(0,r.jsx)(n.p,{children:"Con solo importar el m\xf3dulo, las tareas configuradas comenzar\xe1n a ejecutarse autom\xe1ticamente seg\xfan la programaci\xf3n definida."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-relaci\xf3n-con-otros-archivos",children:"\ud83e\udde9 Relaci\xf3n con otros archivos"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Utiliza el servicio ",(0,r.jsx)(n.code,{children:"stockBajo.service.ts"})," ubicado en ",(0,r.jsx)(n.code,{children:"src/services/notificaciones/"})," para enviar las notificaciones."]}),"\n",(0,r.jsx)(n.li,{children:"Puede coexistir con otros cron jobs si se agregan en el mismo archivo o en m\xf3dulos separados."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-consideraciones",children:"\u26a0\ufe0f Consideraciones"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["El formato de programaci\xf3n (",(0,r.jsx)(n.code,{children:"'0 8 * * *'"}),") sigue la sintaxis est\xe1ndar de ",(0,r.jsx)(n.strong,{children:"cron"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," \u2192 minuto (0)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"8"})," \u2192 hora (8 AM)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"* * *"})," \u2192 todos los d\xedas, todos los meses, todos los d\xedas de la semana"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Si la aplicaci\xf3n se detiene o reinicia, las tareas programadas dejar\xe1n de ejecutarse hasta que se inicie nuevamente el backend."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["En entornos con ",(0,r.jsx)(n.strong,{children:"Hot Reload"})," o m\xfaltiples instancias (por ejemplo, en servidores distribuidos), la tarea podr\xeda ejecutarse m\xe1s de una vez si no se controla la concurrencia."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>a});var o=s(6540);const r={},i=o.createContext(r);function c(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);