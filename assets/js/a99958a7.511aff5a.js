"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[288],{5930:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>d,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"backend/controllers/user.controller","title":"AuthController","description":"\ud83d\udcc4 Descripci\xf3n","source":"@site/docs/backend/controllers/user.controller.md","sourceDirName":"backend/controllers","slug":"/backend/controllers/user.controller","permalink":"/producttrack/docs/backend/controllers/user.controller","draft":false,"unlisted":false,"editUrl":"https://github.com/Mari0724/producttrack/docs/backend/controllers/user.controller.md","tags":[],"version":"current","frontMatter":{"id":"user.controller","title":"AuthController","sidebar_label":"Tabla users"},"sidebar":"tutorialSidebar","previous":{"title":"OCR","permalink":"/producttrack/docs/backend/controllers/ocr.controller"},"next":{"title":"\ud83d\udce6 Backend","permalink":"/producttrack/docs/backend/"}}');var i=n(4848),l=n(8453);const c={id:"user.controller",title:"AuthController",sidebar_label:"Tabla users"},d="controllers/user.controller.ts",o={},a=[{value:"\ud83d\udcc4 Descripci\xf3n",id:"-descripci\xf3n",level:2},{value:"\ud83d\udd0d Ubicaci\xf3n",id:"-ubicaci\xf3n",level:2},{value:"\u2705 Responsabilidades",id:"-responsabilidades",level:2},{value:"\u2699\ufe0f Funciones principales",id:"\ufe0f-funciones-principales",level:2},{value:"<code>getAll()</code>",id:"getall",level:3},{value:"<code>getById(id: string)</code>",id:"getbyidid-string",level:3},{value:"<code>create()</code>",id:"create",level:3},{value:"<code>updateUsuario(id: number, body: Partial&lt;UserDTO&gt;)</code>",id:"updateusuarioid-number-body-partialuserdto",level:3},{value:"<code>deleteUsuario(id: number)</code>",id:"deleteusuarioid-number",level:3},{value:"\ud83e\udde0 Notas",id:"-notas",level:2}];function t(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"controllersusercontrollerts",children:(0,i.jsx)(s.code,{children:"controllers/user.controller.ts"})})}),"\n",(0,i.jsx)(s.h2,{id:"-descripci\xf3n",children:"\ud83d\udcc4 Descripci\xf3n"}),"\n",(0,i.jsxs)(s.p,{children:["Este archivo contiene el controlador para la entidad ",(0,i.jsx)(s.code,{children:"Usuario"}),". Se encarga de manejar las peticiones HTTP relacionadas con los usuarios, validarlas y delegar la l\xf3gica de negocio al servicio correspondiente."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"-ubicaci\xf3n",children:"\ud83d\udd0d Ubicaci\xf3n"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"src/controllers/user.controller.ts"})}),"\n",(0,i.jsx)(s.h2,{id:"-responsabilidades",children:"\u2705 Responsabilidades"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Manejar las solicitudes entrantes relacionadas con usuarios."}),"\n",(0,i.jsxs)(s.li,{children:["Validar entradas usando Zod (",(0,i.jsx)(s.code,{children:"userSchema"}),")."]}),"\n",(0,i.jsxs)(s.li,{children:["Delegar operaciones al servicio de usuario (",(0,i.jsx)(s.code,{children:"user.service.ts"}),")."]}),"\n",(0,i.jsx)(s.li,{children:"Devolver respuestas adecuadas, incluyendo manejo de errores y c\xf3digos HTTP."}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"\ufe0f-funciones-principales",children:"\u2699\ufe0f Funciones principales"}),"\n",(0,i.jsx)(s.h3,{id:"getall",children:(0,i.jsx)(s.code,{children:"getAll()"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'@Get("/")\r\npublic async getAll(...): Promise<any>\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"M\xe9todo HTTP:"})," ",(0,i.jsx)(s.code,{children:"GET /usuarios"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Descripci\xf3n:"})," Retorna todos los usuarios que cumplan con los filtros enviados por query (username, correo, estado, tipo, etc.)."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Notas:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Permite m\xfaltiples filtros opcionales."}),"\n",(0,i.jsx)(s.li,{children:"No requiere autenticaci\xf3n."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"getbyidid-string",children:(0,i.jsx)(s.code,{children:"getById(id: string)"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'@Get("/{id}")\r\npublic async getById(id: string): Promise<any>\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"M\xe9todo HTTP:"})," ",(0,i.jsx)(s.code,{children:"GET /usuarios/{id}"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Descripci\xf3n:"})," Retorna los datos del usuario con el ID especificado."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Notas:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Devuelve 404 si el usuario no existe."}),"\n",(0,i.jsx)(s.li,{children:"Valida que el ID sea un n\xfamero v\xe1lido antes de llamar al servicio."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"create",children:(0,i.jsx)(s.code,{children:"create()"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'@Post("/")\r\npublic async create(@Body() requestBody: UserDTO): Promise<ResponseMessageWithToken>\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"M\xe9todo HTTP:"})," ",(0,i.jsx)(s.code,{children:"POST /usuarios"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Descripci\xf3n:"})," Crea un nuevo usuario a partir de los datos del cuerpo de la solicitud."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Validaciones especiales:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Usa Zod (",(0,i.jsx)(s.code,{children:"userSchema"}),") para validar estructura y tipos de datos."]}),"\n",(0,i.jsxs)(s.li,{children:["Si el rol es ",(0,i.jsx)(s.code,{children:"EQUIPO"}),", ",(0,i.jsx)(s.code,{children:"empresaId"})," es obligatorio."]}),"\n",(0,i.jsxs)(s.li,{children:["Si el rol no es ",(0,i.jsx)(s.code,{children:"EQUIPO"}),", ",(0,i.jsx)(s.code,{children:"empresaId"})," no debe estar presente."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Respuesta:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Devuelve un token JWT si el usuario es creado exitosamente."}),"\n",(0,i.jsx)(s.li,{children:"Devuelve mensajes descriptivos en caso de error."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"updateusuarioid-number-body-partialuserdto",children:(0,i.jsx)(s.code,{children:"updateUsuario(id: number, body: Partial<UserDTO>)"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'@Put("{id}")\r\npublic async updateUsuario(...): Promise<ResponseMessage>\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"M\xe9todo HTTP:"})," ",(0,i.jsx)(s.code,{children:"PUT /usuarios/{id}"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Descripci\xf3n:"})," Actualiza los datos de un usuario espec\xedfico."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Validaciones:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Si se quiere actualizar a un rol distinto de ",(0,i.jsx)(s.code,{children:"EQUIPO"}),", no debe enviarse ",(0,i.jsx)(s.code,{children:"empresaId"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Manejo de errores:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"404 si el usuario no existe."}),"\n",(0,i.jsx)(s.li,{children:"500 si ocurre un error inesperado en el servidor."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"deleteusuarioid-number",children:(0,i.jsx)(s.code,{children:"deleteUsuario(id: number)"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'@Delete("{id}")\r\npublic async deleteUsuario(@Path() id: number): Promise<ResponseMessage>\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"M\xe9todo HTTP:"})," ",(0,i.jsx)(s.code,{children:"DELETE /usuarios/{id}"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Descripci\xf3n:"})," Elimina l\xf3gicamente (soft delete) un usuario por su ID."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Respuesta:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"200 si se elimina correctamente."}),"\n",(0,i.jsx)(s.li,{children:"404 si el usuario no existe."}),"\n",(0,i.jsx)(s.li,{children:"500 si ocurre un error en el servidor."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"-notas",children:"\ud83e\udde0 Notas"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Se usa ",(0,i.jsx)(s.code,{children:"TSOA"})," para definir rutas, tipos, documentaci\xf3n Swagger y validaci\xf3n."]}),"\n",(0,i.jsxs)(s.li,{children:["Todas las funciones llaman a servicios definidos en ",(0,i.jsx)(s.code,{children:"user.service.ts"}),"."]}),"\n",(0,i.jsx)(s.li,{children:"Implementa separaci\xf3n de responsabilidades limpia entre controlador y servicio."}),"\n",(0,i.jsxs)(s.li,{children:["Respuestas con mensajes estructurados (",(0,i.jsx)(s.code,{children:"ResponseMessage"}),", ",(0,i.jsx)(s.code,{children:"ResponseMessageWithToken"}),")."]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>d});var r=n(6540);const i={},l=r.createContext(i);function c(e){const s=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(l.Provider,{value:s},e.children)}}}]);